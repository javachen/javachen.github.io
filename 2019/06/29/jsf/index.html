<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Java Server Faces - JavaChen Blog - Ramblings of a coder</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="JavaChen" /><meta name="description" content="JSF的诞生还要追溯到2001年，在2001年5月，Sun制定了一个用户界面框架的规范JSR#127，而JSF 规范的1.0到2004年3月才得以面世。由于SUN的官僚作风及商业推广的失败，直到JAVA EE 5的发布，JSF推出1.2版本并作为JAVA EE 5的一部分同时发布。历经5年的风雨，JSF才成为了JAVA企业应用规范的一部份，同时也错过了发展的黄金时期。" /><meta name="keywords" content="Java, Hadoop, Docker" />


<meta name="baidu-site-verification" content="OMsbiDfo1G" />



<meta name="generator" content="Hugo 0.58.3 with theme even" />


<link rel="canonical" href="http://localhost:1313/2019/06/29/jsf/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">


<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">
<link rel="stylesheet" href="/css/custom.css">


<meta property="og:title" content="Java Server Faces" />
<meta property="og:description" content="JSF的诞生还要追溯到2001年，在2001年5月，Sun制定了一个用户界面框架的规范JSR#127，而JSF 规范的1.0到2004年3月才得以面世。由于SUN的官僚作风及商业推广的失败，直到JAVA EE 5的发布，JSF推出1.2版本并作为JAVA EE 5的一部分同时发布。历经5年的风雨，JSF才成为了JAVA企业应用规范的一部份，同时也错过了发展的黄金时期。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/2019/06/29/jsf/" />
<meta property="article:published_time" content="2019-06-29T08:00:00+08:00" />
<meta property="article:modified_time" content="2019-06-29T08:00:00+08:00" />
<meta itemprop="name" content="Java Server Faces">
<meta itemprop="description" content="JSF的诞生还要追溯到2001年，在2001年5月，Sun制定了一个用户界面框架的规范JSR#127，而JSF 规范的1.0到2004年3月才得以面世。由于SUN的官僚作风及商业推广的失败，直到JAVA EE 5的发布，JSF推出1.2版本并作为JAVA EE 5的一部分同时发布。历经5年的风雨，JSF才成为了JAVA企业应用规范的一部份，同时也错过了发展的黄金时期。">


<meta itemprop="datePublished" content="2019-06-29T08:00:00&#43;08:00" />
<meta itemprop="dateModified" content="2019-06-29T08:00:00&#43;08:00" />
<meta itemprop="wordCount" content="5196">



<meta itemprop="keywords" content="jsf," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Java Server Faces"/>
<meta name="twitter:description" content="JSF的诞生还要追溯到2001年，在2001年5月，Sun制定了一个用户界面框架的规范JSR#127，而JSF 规范的1.0到2004年3月才得以面世。由于SUN的官僚作风及商业推广的失败，直到JAVA EE 5的发布，JSF推出1.2版本并作为JAVA EE 5的一部分同时发布。历经5年的风雨，JSF才成为了JAVA企业应用规范的一部份，同时也错过了发展的黄金时期。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">JavaChen Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">JavaChen Blog</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Java Server Faces</h1>

      <div class="post-meta">
        <span class="post-time"> 2019-06-29 </span>
        <div class="post-category">
            <a href="/categories/java/"> java </a>
            </div>
          <span class="more-meta"> 约 5196 字 </span>
          <span class="more-meta"> 预计阅读 11 分钟 </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li><a href="#1-jsf介绍">1、JSF介绍</a>
<ul>
<li><a href="#jsf-的诞生">JSF 的诞生</a></li>
<li><a href="#什么是-jsf">什么是 JSF</a></li>
<li><a href="#版本">版本</a></li>
<li><a href="#jsf的优点">JSF的优点</a></li>
</ul></li>
<li><a href="#2-jsf的特点">2、JSF的特点</a></li>
<li><a href="#3-jsf的生命周期">3、JSF的生命周期</a>
<ul>
<li><a href="#3-1-执行阶段">3.1、执行阶段</a>
<ul>
<li><a href="#恢复视图阶段">恢复视图阶段</a></li>
<li><a href="#应用请求值阶段">应用请求值阶段</a></li>
<li><a href="#流程验证阶段">流程验证阶段</a></li>
<li><a href="#更新模型值阶段">更新模型值阶段</a></li>
<li><a href="#调用应用阶段">调用应用阶段</a></li>
<li><a href="#渲染响应阶段">渲染响应阶段</a></li>
</ul></li>
<li><a href="#3-2-渲染阶段">3.2、渲染阶段</a></li>
</ul></li>
<li><a href="#4-jsf架构">4、JSF架构</a></li>
<li><a href="#5-jsf使用">5、JSF使用</a>
<ul>
<li><a href="#5-1-第一个示例">5.1、第一个示例</a></li>
<li><a href="#5-2-托管的bean">5.2、托管的bean</a>
<ul>
<li><a href="#使用xml配置">使用XML配置</a></li>
<li><a href="#使用注解">使用注解</a></li>
<li><a href="#bean的生命周期">Bean的生命周期</a></li>
</ul></li>
</ul></li>
<li><a href="#6-参考文章">6、参考文章</a></li>
</ul>
</nav>
  </div>
</div>
    <div class="post-content">
      

<h1 id="1-jsf介绍">1、JSF介绍</h1>

<h2 id="jsf-的诞生">JSF 的诞生</h2>

<p>JSF的诞生还要追溯到2001年，在2001年5月，Sun制定了一个用户界面框架的规范JSR#127，而JSF 规范的1.0到2004年3月才得以面世。由于SUN的官僚作风及商业推广的失败，直到JAVA EE 5的发布，JSF推出1.2版本并作为JAVA EE 5的一部分同时发布。历经5年的风雨，JSF才成为了JAVA企业应用规范的一部份，同时也错过了发展的黄金时期。</p>

<h2 id="什么是-jsf">什么是 JSF</h2>

<p>Java Server Faces 简称 JSF，是一种面向组件和事件驱动模型的WEB开发技术，是实现传统的 Model-View-Controller (MVC) 架构的一种 Web 框架。不同之处在于，它采用该模式的一种特别丰富的实现。与 Model 2 或者 Struts、WebWork 和 Spring MVC 之类的框架中使用的 “push-MVC” 方法相比，JSF 中的 MVC 实现更接近于传统的 GUI 应用程序。前面那些框架被归类为*基于动作的（action-based）*，而 JSF 则属于基于<em>组件模型</em> 的新的框架家族中的一员。</p>

<p><img src="https://www.jdon.com/simgs/jsf-struts-tapestry.jpg" alt="img" /></p>

<p>它提供了一个定义良好的编程模型，由丰富的API和标签库组成。最新版本<code>JSF 2</code>使用<code>Facelets</code>作为其默认模板系统。 它是用Java编写的。</p>

<p>JSF API提供组件(<code>inputText</code>，<code>commandButton</code>等)并帮助管理其状态。 它还提供服务器端验证，数据转换，定义页面导航，提供可扩展性，国际化支持，可访问性等。</p>

<p>JSF标签库用于在Web页面上添加组件，并将组件与服务器上的对象进行连接。 它还包含实现组件标签的标签处理程序。</p>

<h2 id="版本">版本</h2>

<table>
<thead>
<tr>
<th>版本</th>
<th>发布日期</th>
<th>描述</th>
</tr>
</thead>

<tbody>
<tr>
<td>Jsf 2.3</td>
<td>2017</td>
<td>它可能包括主要功能：完整类的<code>bean</code>验证，使用与<code>cdi</code>进行增强整合的推送通信。</td>
</tr>

<tr>
<td>Jsf 2.2</td>
<td>2013-05-21</td>
<td>它引入了新的概念，如无状态视图，页面流和创建可移植资源的能力。</td>
</tr>

<tr>
<td>Jsf 2.1</td>
<td>2010-11-22</td>
<td>这是<code>jsf 2.0</code>的维护版本<code>2</code>，只有非常少量的规则变化。</td>
</tr>

<tr>
<td>Jsf 2.0</td>
<td>2009-07-01</td>
<td>它是易于使用，增强的功能和性能的主要版本，与<code>java ee 6</code>重合。</td>
</tr>

<tr>
<td>Jsf 1.2</td>
<td>2006-05-11</td>
<td>它对核心系统和apis有很多改进，与<code>Java ee 5</code>一致，最初采用<code>java ee</code>。</td>
</tr>

<tr>
<td>Jsf 1.1</td>
<td>2004-05-27</td>
<td>这是一个错误修复版本，没有规则变化。</td>
</tr>

<tr>
<td>Jsf 1.0</td>
<td>2004-03-11</td>
<td>这是一个初始规范发布。</td>
</tr>
</tbody>
</table>

<h2 id="jsf的优点">JSF的优点</h2>

<p>原文出自【易百教程】，商业转载请联系作者获得授权，非商业转载请保留原文链接：<a href="https://www.yiibai.com/jsf/what-is-jsf.html">https://www.yiibai.com/jsf/what-is-jsf.html</a></p>

<h1 id="2-jsf的特点">2、JSF的特点</h1>

<table>
<thead>
<tr>
<th align="left">特点</th>
<th align="left">解释</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">基于组件的框架</td>
<td align="left">JSF是一个基于服务器端组件的框架，它提供内置组件来构建Web应用程序。您可以使用HTML5，Facelets标签来创建网页</td>
</tr>

<tr>
<td align="left">实现Facelets技术</td>
<td align="left">Facelets是一个开源Web模板系统。它是JavaServer Faces的默认视图处理程序技术。 该语言需要有效的输入XML文档才能正常工作。 Facelets支持所有的JSF UI组件，并且完全侧重于构建JSF应用程序的视图</td>
</tr>

<tr>
<td align="left">与表达语言的集成</td>
<td align="left">表达式语言提供了创建用户界面(网页)与应用程序逻辑(被管理的bean)通信的重要机制。 EL表示由JavaServer Faces技术提供的表达式语言的并集</td>
</tr>

<tr>
<td align="left">支持HTML5</td>
<td align="left">HTML5是编写网页的新标准。 JavaServer Faces版本2.2提供了一种简单的方法，将新的HTML 5属性包含在JSF组件中，并提供了HTML5友好的标记</td>
</tr>

<tr>
<td align="left">轻松快捷的网页开发</td>
<td align="left">JSF提供丰富的内置工具和库，以便您可以轻松快速地开发应用程序</td>
</tr>

<tr>
<td align="left">支持国际化</td>
<td align="left">JSF支持国际化创建世界一流Web应用程序，您可以使用不同的语言创建应用程序。 在JSF的帮助下，您可以使应用程序适应各种语言和区域</td>
</tr>

<tr>
<td align="left">Bean注释</td>
<td align="left">SF提供注释工具，您可以在其中执行被管理的Bean中的验证相关任务。这是很好的，因为你可以验证数据，而不是HTML验证</td>
</tr>

<tr>
<td align="left">默认异常处理</td>
<td align="left">JSF提供默认的异常处理，以便您可以开发异常和无bug的Web应用程序</td>
</tr>

<tr>
<td align="left">模板</td>
<td align="left">在新版本的JSF中引入模板提供了组件的可重用性。在JSF应用程序中，您可以创建新模板，重用模板并将其视为应用程序的组件</td>
</tr>

<tr>
<td align="left">内置AJAX支持</td>
<td align="left">JSF提供内置的AJAX支持。 因此，您可以将应用程序请求提交到服务器端，而无需刷新网页。 JSF还支持使用AJAX进行部分渲染</td>
</tr>

<tr>
<td align="left">安全</td>
<td align="left">当状态保存在服务器上并且不使用无状态视图时，JSF提供了隐含的保护，因为<code>Post-back</code>必须包含一个有效的<code>javax.faces.ViewState</code>隐藏参数。 与早期版本相反，在现代JSF实现中，这个值似乎是非常随机的。请注意，客户端上的无状态视图和保存状态没有这种隐含的保护。</td>
</tr>
</tbody>
</table>

<h1 id="3-jsf的生命周期">3、JSF的生命周期</h1>

<p>JSF生命周期分为两个主要阶段：</p>

<ul>
<li>执行阶段</li>
<li>渲染阶段</li>
</ul>

<h2 id="3-1-执行阶段">3.1、执行阶段</h2>

<p>在执行阶段，当第一次请求时，构建或恢复应用程序视图。 对于其他后续请求，执行其他操作，如应用请求参数值，对组件值执行转换和验证，受托管的<code>bean</code>将使用组件值进行更新，并调用应用程序逻辑。
执行阶段被进一步分成以下子阶段。</p>

<ul>
<li>恢复视图阶段</li>
<li>应用请求值阶段</li>
<li>流程验证阶段</li>
<li>更新模型值阶段</li>
<li>调用应用阶段</li>
<li>渲染响应阶段</li>
</ul>

<h3 id="恢复视图阶段">恢复视图阶段</h3>

<p>当客户端请求一个JavaServer Faces页面时，JavaServer Faces实现开始恢复视图阶段。 在此阶段，JSF将视图中的组件构建为请求页面，线性事件处理程序和验证器的视图，并将视图保存在FacesContext实例中。</p>

<p>如果对该页面的请求是回发，那么与该页面相对应的视图已经存在于FacesContext实例中。 在此阶段，JavaServer Faces实现通过使用保存在客户端或服务器上的状态信息来还原视图。</p>

<h3 id="应用请求值阶段">应用请求值阶段</h3>

<p>在此阶段，在回发请求期间恢复组件树。 组件树是表单元素的集合。树中的每个组件通过使用其<code>decode(processDecodes())</code>方法从请求参数中提取其新值。 之后，该值将本地存储在每个组件上。</p>

<ul>
<li>如果任何解码方法或事件侦听器在当前FacesContext实例上调用了renderResponse方法，则JavaServer Faces实现将跳过“渲染响应”阶段。</li>
<li>如果任何事件在此阶段已排队，则JavaServer Faces实现将事件广播到有兴趣的监听器。</li>
<li>如果应用程序需要重定向到其他Web应用程序资源或生成不包含任何JavaServer Faces组件的响应，则可以调用<code>FacesContext.responseComplete()</code>方法。</li>
<li>如果当前请求被识别为部分请求，则从FacesContext检索部分上下文，并应用部分处理方法。</li>
</ul>

<h3 id="流程验证阶段">流程验证阶段</h3>

<p>在此阶段，JavaServer Faces通过使用其<code>validate()</code>方法来处理在组件上注册的所有验证器。 它检查指定验证规则的组件属性，并将这些规则与为组件存储的本地值进行比较。 JavaServer Faces还完成了没有将<code>immediate</code>属性设置为<code>true</code>的输入组件的转换。</p>

<ul>
<li>如果任何验证方法或事件侦听器在当前FacesContext上调用了<code>renderResponse</code>方法，则JavaServer Faces实现将跳过“渲染响应”阶段。</li>
<li>如果应用程序需要重定向到不同的Web应用程序资源或生成不包含任何JavaServer Faces组件的响应，则可以调用<code>FacesContext.responseComplete</code>方法。</li>
<li>如果事件在此阶段已排队，则JavaServer Faces实现将它们广播给有兴趣的监听器。</li>
<li>如果当前请求被识别为部分请求，则从FacesContext检索部分上下文，并应用部分处理方法。</li>
</ul>

<h3 id="更新模型值阶段">更新模型值阶段</h3>

<p>确保数据有效后，它遍历组件树，并将相应的服务器端对象属性设置为组件的本地值。 JavaServer Faces实现只更新输入组件的<code>value</code>属性指向<code>bean</code>属性。 如果本地数据无法转换为<code>bean</code>属性指定的类型，生命周期将直接前进到“渲染响应”阶段，以便重新呈现页面并显示错误。</p>

<ul>
<li>如果任何updateModels方法或任何监听器在当前FacesContext实例上调用了<code>renderResponse()</code>方法，则JavaServer Faces实现将跳过“渲染响应”阶段。</li>
<li>如果应用程序需要重定向到其他Web应用程序资源或生成不包含任何JavaServer Faces组件的响应，则可以调用<code>FacesContext.responseComplete()</code>方法。</li>
<li>如果任何事件在此阶段已排队，JavaServer Faces实现将它们广播到有兴趣的监听器。</li>
<li>如果当前请求被识别为部分请求，则从FacesContext检索部分上下文，并应用部分处理方法。</li>
</ul>

<h3 id="调用应用阶段">调用应用阶段</h3>

<p>在此阶段，JSF处理应用程序级事件，例如提交表单或链接到另一个页面。
现在，如果应用程序需要重定向到其他Web应用程序资源或生成不包含任何JSF组件的响应，则可以调用<code>FacesContext.responseComplete()</code>方法。</p>

<p>之后，JavaServer Faces实现将控制转移到“渲染响应”阶段。</p>

<h3 id="渲染响应阶段">渲染响应阶段</h3>

<p>这是JSF生命周期的最后阶段。 在此阶段，JSF将构建视图并将权限委托给相应的资源来呈现页面。</p>

<ul>
<li>如果这是初始请求，则页面上表示的组件将被添加到组件树中。</li>
<li>如果这不是初始请求，组件已经添加到树中，不需要再添加。</li>
<li>如果请求是回应，并且在应用请求值阶段，过程验证阶段或更新模型值阶段期间遇到错误，则在此阶段将再次呈现原始页面。</li>
</ul>

<p>如果页面包含<code>h:message</code>或<code>h:messages</code>标签，页面上会显示任何排队的错误消息。
在渲染视图的内容之后，保存响应的状态，以便后续请求可以访问它。 恢复视图阶段可以使用保存的状态。</p>

<h2 id="3-2-渲染阶段">3.2、渲染阶段</h2>

<p>在此阶段，请求的视图作为对客户端浏览器的响应。 视图渲染是以HTML或XHTML生成输出的过程。 所以，用户可以在浏览器看到它。</p>

<p>在渲染过程中采取以下步骤。</p>

<ul>
<li>当客户端对<code>index.xhtml</code>网页进行初始请求时，编译应用程序。</li>
<li>应用程序在编译后执行，并为应用程序构建一个新的组件树，并放置在FacesContext中。</li>
<li>使用由<code>EL</code>表达式表示的组件和与其关联受托管<code>bean</code>属性填充组件树。</li>
<li>基于组件树建立了新的视图。</li>
<li>该视图作为响应呈现给请求客户端。</li>
<li>组件树被自动销毁。</li>
<li>在后续请求中，重新构建组件树，并应用已保存的状态。</li>
</ul>

<h1 id="4-jsf架构">4、JSF架构</h1>

<p><img src="https://www.tutorialspoint.com/jsf/images/jsf_architectute.jpg" alt="JSF Architecture" /></p>

<h1 id="5-jsf使用">5、JSF使用</h1>

<h2 id="5-1-第一个示例">5.1、第一个示例</h2>

<p>创建一个maven项目first-jsf：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">mvn archetype:generate -DgroupId<span class="o">=</span>com.javachen -DartifactId<span class="o">=</span>first-jsf <span class="se">\
</span><span class="se"></span>    -DarchetypeArtifactId<span class="o">=</span>maven-archetype-webapp -DinteractiveMode<span class="o">=</span>false</code></pre></td></tr></table>
</div>
</div>
<p>修改pom文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0&#34;</span> 
<span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> 
<span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&#34;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.javachen<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>first-jsf<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;packaging&gt;</span>war<span class="nt">&lt;/packaging&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;name&gt;</span>first-jsf Maven Webapp<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;url&gt;</span>http://maven.apache.org<span class="nt">&lt;/url&gt;</span>

  <span class="nt">&lt;dependencies&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>com.sun.faces<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>jsf-api<span class="nt">&lt;/artifactId&gt;</span>
         <span class="nt">&lt;version&gt;</span>2.1.7<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>

      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>com.sun.faces<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>jsf-impl<span class="nt">&lt;/artifactId&gt;</span>
         <span class="nt">&lt;version&gt;</span>2.1.7<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
   <span class="nt">&lt;/dependencies&gt;</span>

   <span class="nt">&lt;build&gt;</span>
      <span class="nt">&lt;finalName&gt;</span>first-jsf<span class="nt">&lt;/finalName&gt;</span>
      <span class="nt">&lt;plugins&gt;</span>
         <span class="nt">&lt;plugin&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>2.3.1<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
               <span class="nt">&lt;source&gt;</span>1.6<span class="nt">&lt;/source&gt;</span>
               <span class="nt">&lt;target&gt;</span>1.6<span class="nt">&lt;/target&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
         <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;/plugins&gt;</span>
   <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></td></tr></table>
</div>
</div>
<p>修改web.xml文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
         <span class="na">xmlns =</span> <span class="s">&#34;http://java.sun.com/xml/ns/javaee&#34;</span>
         <span class="na">xmlns:web =</span> <span class="s">&#34;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&#34;</span>
        <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://java.sun.com/xml/ns/javaee
</span><span class="s">   http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&#34;</span>
         <span class="na">id =</span> <span class="s">&#34;WebApp_ID&#34;</span> <span class="na">version=</span><span class="s">&#34;2.5&#34;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;welcome-file-list&gt;</span>
    <span class="nt">&lt;welcome-file&gt;</span>home.xhtml<span class="nt">&lt;/welcome-file&gt;</span>
  <span class="nt">&lt;/welcome-file-list&gt;</span>

  <span class="c">&lt;!--
</span><span class="c">     FacesServlet is main servlet responsible to handle all request.
</span><span class="c">     It acts as central controller.
</span><span class="c">     This servlet initializes the JSF components before the JSP is displayed.
</span><span class="c">  --&gt;</span>

  <span class="nt">&lt;servlet&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>Faces Servlet<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;servlet-class&gt;</span>javax.faces.webapp.FacesServlet<span class="nt">&lt;/servlet-class&gt;</span>
    <span class="nt">&lt;load-on-startup&gt;</span>1<span class="nt">&lt;/load-on-startup&gt;</span>
  <span class="nt">&lt;/servlet&gt;</span>

  <span class="nt">&lt;servlet-mapping&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>Faces Servlet<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;url-pattern&gt;</span>*.xhtml<span class="nt">&lt;/url-pattern&gt;</span>
  <span class="nt">&lt;/servlet-mapping&gt;</span>
<span class="nt">&lt;/web-app&gt;</span></code></pre></td></tr></table>
</div>
</div>
<p>webapp下创建home.xhtml：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;!DOCTYPE html PUBLIC &#34;-//W3C//DTD XHTML 1.0 Transitional//EN&#34;
</span><span class="cp">        &#34;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&#34;&gt;</span>
<span class="nt">&lt;html</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.w3.org/1999/xhtml&#34;</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>JSF Tutorial!<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
        #{helloWorld.getMessage()}
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></td></tr></table>
</div>
</div>
<p>项目导入到ide中，例如idea，然后在tomcat中运行，访问浏览器 <a href="http://localhost:8080/first_jsf/">http://localhost:8080/first_jsf/</a> 可以看到 <code>Hello World!</code>。</p>

<h2 id="5-2-托管的bean">5.2、托管的bean</h2>

<p>JSF 托管bean是JSF注册的常规Java Bean类。托管bean包含getter和setter方法，业务逻辑。JSF托管bean作为UI组件的Model。 它存储xhtml页面使用的数据。借助JSF框架，可以从JSF页面访问托管Bean。
在JSF 1.2中，我们必须在JSF配置文件<code>faces-config.xml</code>中注册受管理的bean。
从JSF 2.0可以使用注解注册管理bean。</p>

<h3 id="使用xml配置">使用XML配置</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;managed-bean&gt;</span>
    <span class="nt">&lt;managed-bean-name&gt;</span>helloWorld<span class="nt">&lt;/managed-bean-name&gt;</span>
    <span class="nt">&lt;managed-bean-class&gt;</span>com.javachen.HelloWorld<span class="nt">&lt;/managed-bean-class&gt;</span>
    <span class="nt">&lt;managed-bean-scope&gt;</span>request<span class="nt">&lt;/managed-bean-scope&gt;</span>
<span class="nt">&lt;/managed-bean&gt;</span> </code></pre></td></tr></table>
</div>
</div>
<h3 id="使用注解">使用注解</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@ManagedBean</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#34;helloWorld&#34;</span><span class="p">,</span> <span class="n">eager</span> <span class="o">=</span> <span class="kc">true</span><span class="p">)</span>
<span class="kd">public</span> <span class="nf">class</span> <span class="n">HelloWorld</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="nf">HelloWorld</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;HelloWorld started!&#34;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="nf">String</span> <span class="n">getMessage</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&#34;Hello World!&#34;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p><code>@ManagedBean</code>将bean标识为名称属性中指定的名称的托管bean。如果未指定<code>name</code>属性，那么托管bean名称将默认为简单的类名称，其中第一个字母小写。 在我们的情况下是<code>helloWorld</code>。
如果<code>eager</code>设置为“<code>true</code>”，则在请求之前创建托管bean。如果使用“<code>lazy</code>”初始化，只有在请求时才会创建bean。</p>

<h3 id="bean的生命周期">Bean的生命周期</h3>

<p>范围注解设置受管Bean的范围。如果未指定范围，则bean将默认为请求范围。我们可以将JSF bean生命周期设置为以下列表。</p>

<ul>
<li><code>@RequestScoped</code> bean只要HTTP请求响应就行。它根据HTTP请求创建，并在与HTTP请求相关联的HTTP响应完成时被销毁。</li>
<li><code>@NoneScoped</code> bean与单个表达式语言(EL)求值时间一样长。 在EL求值评估时创建，并在EL求值评估后被销毁。</li>
<li><code>@ViewScoped</code> bean只要用户在浏览器窗口中与同一JSF视图进行交互即可。 它根据HTTP请求创建，并在用户导航到其他视图时被销毁。</li>
<li><code>@SessionScoped</code> bean只要HTTP会话生存。 它在第一个HTTP请求时创建，并在HTTP会话无效时被销毁。</li>
<li><code>@ApplicationScoped</code> bean只要Web应用程序生存。 它在第一个HTTP请求或Web应用程序启动时创建，并且在<code>@ManagedBean</code>中设置属性<code>eager = true</code>，并在Web应用程序关闭时被销毁。</li>
<li><code>@CustomScoped</code> bean只要在为此范围创建的自定义Map中的bean的条目生效。</li>
</ul>

<h1 id="6-参考文章">6、参考文章</h1>

<ul>
<li><p><a href="https://www.tutorialspoint.com/jsf">JavaServer Faces (JSF) Tutorial</a></p></li>

<li><p><a href="https://www.yiibai.com/jsf/">JSF教程</a></p></li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">JavaChen</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2019-06-29
        
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/images/wechatpay.jpg">
        <span>微信打赏</span>
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="/images/alipay.jpg">
        <span>支付宝打赏</span>
      </label>
  </div>
</div><footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/jsf/">jsf</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/2019/07/01/struts2/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Struts2</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/2019/06/29/java-web-framework/">
            <span class="next-text nav-default">Java Web框架发展历程</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:junecloud@163.com" class="iconfont icon-email" title="email"></a>
      <a href="http://github.com/javachen" class="iconfont icon-github" title="github"></a>
      <a href="http://weibo.com/chenzhijun" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://space.bilibili.com/287563020/" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="http://localhost:1313/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2009 - 
    2019
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">JavaChen</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>

<script id="baidu_analytics">
  var _hmt = _hmt || [];
  (function() {
    if (window.location.hostname === 'localhost') return;
    var hm = document.createElement("script"); hm.async = true;
    hm.src = "https://hm.baidu.com/hm.js?7eaf37274cf8796df56903a88389e82f";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>






</body>
</html>
