<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Scala基本语法和概念 - JavaChen Blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="JavaChen" /><meta name="description" content="本文主要包括Scala的安装过程并理解Scala的基本语法和概念，包括表达式、变量、基本类型、函数、流程控制等相关内容。" /><meta name="keywords" content="Java, Hadoop, Docker, Kubernetes" />


<meta name="baidu-site-verification" content="OMsbiDfo1G" />



<meta name="generator" content="Hugo 0.54.0 with theme even" />


<link rel="canonical" href="https://blog.javachen.space/2015/04/20/basic-of-scala/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link href="/dist/even.b90a1cc1.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">
<link rel="stylesheet" href="/css/custom.css">


<meta property="og:title" content="Scala基本语法和概念" />
<meta property="og:description" content="本文主要包括Scala的安装过程并理解Scala的基本语法和概念，包括表达式、变量、基本类型、函数、流程控制等相关内容。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.javachen.space/2015/04/20/basic-of-scala/" />
<meta property="article:published_time" content="2015-04-20T08:00:00&#43;08:00"/>
<meta property="article:modified_time" content="2015-04-20T08:00:00&#43;08:00"/>

<meta itemprop="name" content="Scala基本语法和概念">
<meta itemprop="description" content="本文主要包括Scala的安装过程并理解Scala的基本语法和概念，包括表达式、变量、基本类型、函数、流程控制等相关内容。">


<meta itemprop="datePublished" content="2015-04-20T08:00:00&#43;08:00" />
<meta itemprop="dateModified" content="2015-04-20T08:00:00&#43;08:00" />
<meta itemprop="wordCount" content="9578">



<meta itemprop="keywords" content="scala," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Scala基本语法和概念"/>
<meta name="twitter:description" content="本文主要包括Scala的安装过程并理解Scala的基本语法和概念，包括表达式、变量、基本类型、函数、流程控制等相关内容。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">JavaChen Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">JavaChen Blog</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Scala基本语法和概念</h1>

      <div class="post-meta">
        <span class="post-time"> 2015-04-20 </span>
        <div class="post-category">
            <a href="/categories/scala/"> scala </a>
            </div>
          <span class="more-meta"> 约 9578 字 </span>
          <span class="more-meta"> 预计阅读 20 分钟 </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次阅读 </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li><a href="#1-安装">1. 安装</a></li>
<li><a href="#2-表达式">2. 表达式</a></li>
<li><a href="#3-变量">3. 变量</a></li>
<li><a href="#4-基本类型和操作">4. 基本类型和操作</a>
<ul>
<li><a href="#一些基本类型">一些基本类型</a></li>
<li><a href="#操作符和方法">操作符和方法</a></li>
<li><a href="#数学运算">数学运算</a></li>
<li><a href="#对象相等性">对象相等性</a></li>
<li><a href="#富包装器">富包装器</a></li>
</ul></li>
<li><a href="#5-函数">5. 函数</a>
<ul>
<li><a href="#函数定义">函数定义</a></li>
<li><a href="#映射式定义">映射式定义</a></li>
<li><a href="#特殊函数名">特殊函数名 + - * /</a></li>
<li><a href="#函数的调用">函数的调用</a></li>
<li><a href="#匿名函数">匿名函数</a></li>
<li><a href="#偏应用函数-partial-application">偏应用函数（Partial application）</a></li>
<li><a href="#柯里化函数">柯里化函数</a></li>
<li><a href="#可变长度参数">可变长度参数</a></li>
<li><a href="#lazy参数">lazy参数</a></li>
</ul></li>
<li><a href="#6-流程控制">6. 流程控制</a>
<ul>
<li><a href="#if-else">if..else</a></li>
<li><a href="#while">while</a></li>
<li><a href="#循环操作">循环操作</a></li>
<li><a href="#match-表达式">match 表达式</a></li>
<li><a href="#case-if-表达式">case if 表达式</a></li>
<li><a href="#break-continue">break、continue</a></li>
<li><a href="#try-catch-finally">try catch finally</a></li>
</ul></li>
<li><a href="#7-其他">7. 其他</a>
<ul>
<li><a href="#null-none-nil-nothing">Null, None, Nil, Nothing</a></li>
<li><a href="#区分">区分&lt;-,=&gt;,-&gt;</a></li>
</ul></li>
<li><a href="#8-参考资料">8. 参考资料</a></li>
</ul>
</nav>
  </div>
</div>
    <div class="post-content">
      

<p>本文主要包括Scala的安装过程并理解Scala的基本语法和概念，包括表达式、变量、基本类型、函数、流程控制等相关内容。</p>

<h1 id="1-安装">1. 安装</h1>

<p>从<a href="http://www.scala-lang.org/download/all.html">All Versions Scala</a>下载所需版本Scala安装包，解压到指定目录之后，配置环境变量并使其生效。</p>

<p>如果你使用Mac，则可以使用<code>brew</code>安装：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">⇒  brew install scala</code></pre></td></tr></table>
</div>
</div>
<p>在终端键入<code>scala</code>查看Scala的版本，并进入Scala的解释器：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">⇒</span>  <span class="n">scala</span>
<span class="nc">Welcome</span> <span class="n">to</span> <span class="nc">Scala</span> <span class="n">version</span> <span class="mf">2.11</span><span class="o">.</span><span class="mi">6</span> <span class="o">(</span><span class="nc">Java</span> <span class="nc">HotSpot</span><span class="o">(</span><span class="nc">TM</span><span class="o">)</span> <span class="mi">64</span><span class="o">-</span><span class="nc">Bit</span> <span class="nc">Server</span> <span class="nc">VM</span><span class="o">,</span> <span class="nc">Java</span> <span class="mf">1.7</span><span class="o">.</span><span class="mi">0</span><span class="n">_60</span><span class="o">).</span>
<span class="nc">Type</span> <span class="n">in</span> <span class="n">expressions</span> <span class="n">to</span> <span class="n">have</span> <span class="n">them</span> <span class="n">evaluated</span><span class="o">.</span>
<span class="nc">Type</span> <span class="k">:</span><span class="kt">help</span> <span class="kt">for</span> <span class="kt">more</span> <span class="kt">information.</span>

<span class="kt">scala&gt;</span></code></pre></td></tr></table>
</div>
</div>
<h1 id="2-表达式">2. 表达式</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">2</span></code></pre></td></tr></table>
</div>
</div>
<p>res0是解释器自动创建的变量名称，用来指代表达式的计算结果。它是Int类型，值为2。</p>

<p>resX识别符还将用在后续的代码行中。例如,既然res0已在之前设为3，res0 * 3就是 9:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="n">res0</span> <span class="o">*</span> <span class="mi">3</span>
<span class="n">res1</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">9</span></code></pre></td></tr></table>
</div>
</div>
<p>打印 &ldquo;Hello, world!&rdquo;  :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="n">println</span><span class="o">(</span><span class="s">&#34;Hello, world!&#34;</span><span class="o">)</span>
<span class="nc">Hello</span><span class="o">,</span> <span class="n">world</span><span class="o">!</span></code></pre></td></tr></table>
</div>
</div>
<p><code>println</code>函数在标准输出上打印传给它的字串，就跟Java里的<code>System.out.println</code>一样。</p>

<h1 id="3-变量">3. 变量</h1>

<p>Scala 有两种变量：<code>val</code> 和 <code>var</code>。val 类似于 Java 里的 final 变量。一旦初始化了，val 就不能再赋值了。与之对应的，var 如同 Java 里面的非 final 变量。var 可以在它生命周期 中被多次赋值。下面是一个 val 的定义:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">msg</span> <span class="k">=</span> <span class="s">&#34;Hello, world!&#34;</span>
<span class="n">msg</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Hello</span><span class="o">,</span> <span class="n">world</span><span class="o">!</span></code></pre></td></tr></table>
</div>
</div>
<p>这个语句引入了msg当作字串&rdquo;Hello, world!&ldquo;的名字。类型是 java.lang.String，因为 Scala 的字串是由 Java 的 String 类实现的。</p>

<p>这里定义的msg变量并没有指定类型，Scala解释器会自动推断出其类型，当然你也可以显示的标注类型：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">msg2</span><span class="k">:</span> <span class="kt">java.lang.String</span> <span class="o">=</span> <span class="s">&#34;Hello again, world!&#34;</span>
<span class="n">msg2</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Hello</span> <span class="n">again</span><span class="o">,</span> <span class="n">world</span><span class="o">!</span></code></pre></td></tr></table>
</div>
</div>
<p>因为在Scala程序里<code>java.lang</code>类型的简化名也是可见的，所以可以简化为:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">msg3</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">&#34;Hello yet again, world!&#34;</span>
<span class="n">msg3</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Hello</span> <span class="n">yet</span> <span class="n">again</span><span class="o">,</span> <span class="n">world</span><span class="o">!</span></code></pre></td></tr></table>
</div>
</div>
<p>如果你想定义一个变量并修改它的值，你可以选择使用<code>var</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">var</span> <span class="n">greeting</span> <span class="k">=</span> <span class="s">&#34;Hello, world!&#34;</span>
<span class="n">greeting</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Hello</span><span class="o">,</span> <span class="n">world</span><span class="o">!</span></code></pre></td></tr></table>
</div>
</div>
<p>由于 greeting 是 var 而不是 val,你可以在之后对它重新赋值。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="n">greeting</span> <span class="k">=</span> <span class="s">&#34;Leave me alone, world!&#34;</span>
<span class="n">greeting</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Leave</span> <span class="n">me</span> <span class="n">alone</span><span class="o">,</span> <span class="n">world</span><span class="o">!</span></code></pre></td></tr></table>
</div>
</div>
<p>要输入一些能跨越多行的东西,只要一行行输进去就行。如果输到行尾还没结束,解释器 将在下一行回应一个竖线。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">multiLine</span> <span class="k">=</span>
     <span class="o">|</span> <span class="s">&#34;This is the next line.&#34;</span>
<span class="n">multiLine</span><span class="k">:</span> <span class="kt">java.lang.String</span> <span class="o">=</span> <span class="nc">This</span> <span class="n">is</span> <span class="n">the</span> <span class="n">next</span> <span class="n">line</span><span class="o">.</span></code></pre></td></tr></table>
</div>
</div>
<p>如果你意识到你输入了一些错误的东西,而解释器仍在等着你更多的输入,你可以通过按 两次回车取消掉:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">oops</span> <span class="k">=</span>
     <span class="o">|</span>
     <span class="o">|</span>
<span class="nc">You</span> <span class="n">typed</span> <span class="n">two</span> <span class="n">blank</span> <span class="n">lines</span><span class="o">.</span> <span class="nc">Starting</span> <span class="n">a</span> <span class="k">new</span> <span class="n">command</span><span class="o">.</span>
<span class="n">scala</span><span class="o">&gt;</span></code></pre></td></tr></table>
</div>
</div>
<p>var 变量可重新赋值，如果赋值为<code>_</code>，则表示使用缺省值(0、false、null)，例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">var</span> <span class="n">d</span><span class="k">:</span><span class="kt">Double</span> <span class="o">=</span> <span class="k">_</span> <span class="c1">// d = 0.0
</span><span class="c1"></span><span class="k">var</span> <span class="n">i</span><span class="k">:</span><span class="kt">Int</span> <span class="o">=</span> <span class="k">_</span> <span class="c1">// i = 0
</span><span class="c1"></span><span class="k">var</span> <span class="n">s</span><span class="k">:</span><span class="kt">String</span> <span class="o">=</span> <span class="k">_</span> <span class="c1">// s = null
</span><span class="c1"></span><span class="k">var</span> <span class="n">t</span><span class="k">:</span><span class="kt">T</span> <span class="o">=</span> <span class="k">_</span>  <span class="o">//</span> <span class="n">泛型T对应的默认值</span></code></pre></td></tr></table>
</div>
</div>
<p>Scala还能像Python一样方便的赋值：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="c1">// 给多个变量赋同一初始值
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="k">=</span><span class="mi">0</span>
<span class="n">x</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">y</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">// 同时定义多个变量，注意：val x,y=10,&#34;hello&#34; 是错误的
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span> <span class="k">=</span> <span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="s">&#34;hello&#34;</span><span class="o">)</span>
<span class="n">x</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">y</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="n">hello</span>

<span class="c1">// x = 1, y = List(2,3,4)
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">x</span><span class="k">:</span><span class="kt">:y</span> <span class="o">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">)</span>
<span class="n">x</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">y</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span>

<span class="c1">// a = 1, b = 2, c = 3
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="nc">List</span><span class="o">(</span><span class="n">a</span><span class="o">,</span><span class="n">b</span><span class="o">,</span><span class="n">c</span><span class="o">)</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span>
<span class="n">a</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">c</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">3</span>

<span class="c1">// 也可以用List，Seq
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="nc">Array</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="k">_</span><span class="o">,</span> <span class="k">_</span><span class="o">,</span> <span class="n">c</span> <span class="k">@</span> <span class="k">_</span><span class="o">*)</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">)</span>
<span class="n">a</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">c</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Vector</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">)</span> <span class="o">//</span> <span class="nc">Array</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">),</span> <span class="k">_</span><span class="o">*</span><span class="n">匹配0个到多个</span></code></pre></td></tr></table>
</div>
</div>
<p>使用正则表达式赋值：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">regex</span> <span class="k">=</span> <span class="s">&#34;(\\d+)/(\\d+)/(\\d+)&#34;</span><span class="o">.</span><span class="n">r</span>
<span class="n">regex</span><span class="k">:</span> <span class="kt">scala.util.matching.Regex</span> <span class="o">=</span> <span class="o">(</span><span class="n">\d</span><span class="o">+)/(</span><span class="n">\d</span><span class="o">+)/(</span><span class="n">\d</span><span class="o">+)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">regex</span><span class="o">(</span><span class="n">year</span><span class="o">,</span> <span class="n">month</span><span class="o">,</span> <span class="n">day</span><span class="o">)</span> <span class="k">=</span> <span class="s">&#34;2015/04/20&#34;</span>
<span class="n">year</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="mi">2015</span>
<span class="n">month</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="mi">04</span>
<span class="n">day</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="mi">20</span></code></pre></td></tr></table>
</div>
</div>
<p>除了<code>val</code>，你还可以使用<code>lazy</code>：</p>

<ul>
<li><code>val</code>：定义时就一次求值完成，保持不变</li>
<li><code>lazy</code>：定义时不求值，第一次使用时完成求值，保持不变</li>
</ul>

<p>总结：</p>

<ul>
<li>Scala是严格意义上的静态类型语言，由于其采用了先进的类型推断技术，程序员不需要在写程序时显式指定类型，编译器会根据上下文推断出类型信息。</li>
<li>Scala程序语句结尾没有分号，这也是 Scala中约定俗成的编程习惯。大多数情况下分号都是可省的，如果你需要将两条语句写在同一行，则需要用分号分开它们。</li>
<li>val用于定义不能修改的变量，var定义的变量可以修改和赋值，赋值为<code>_</code>表示使用默认值。</li>
</ul>

<h1 id="4-基本类型和操作">4. 基本类型和操作</h1>

<h2 id="一些基本类型">一些基本类型</h2>

<p>Scala 中的一些基本类型和其实例值域范围如下：</p>

<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">类型</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">Byte</td>
<td align="left">8 位有符号补码整数(-27~27-1)</td>
</tr>

<tr>
<td align="left">Short</td>
<td align="left">16 位有符号补码整数(-215~215-1)</td>
</tr>

<tr>
<td align="left">Int</td>
<td align="left">32 位有符号补码整数(-231~231-1)</td>
</tr>

<tr>
<td align="left">Long</td>
<td align="left">64 位有符号补码整数(-263~263-1)</td>
</tr>

<tr>
<td align="left">Char</td>
<td align="left">16 位无符号Unicode字符(0~216-1)</td>
</tr>

<tr>
<td align="left">String</td>
<td align="left">字符序列</td>
</tr>

<tr>
<td align="left">Float</td>
<td align="left">32 位 IEEE754 单精度浮点数</td>
</tr>

<tr>
<td align="left">Double</td>
<td align="left">64 位 IEEE754 单精度浮点数</td>
</tr>

<tr>
<td align="left">Boolean</td>
<td align="left">true 或 false</td>
</tr>
</tbody>
</table>

<p>除了String归于<code>java.lang</code>包之外，其余所有的基本类型都是包scala的成员。如<code>Int</code>的全名是<code>scala.Int</code>。然而，由于包<code>scala</code>和<code>java.lang</code>的所有成员都被每个Scala源文件自动引用，你可以在任何地方只用简化名。</p>

<p>Scala的基本类型与Java的对应类型范围完全一样，这让Scala编译器能直接把Scala的值类型在它产生的 字节码里转译成 Java 原始类型。</p>

<p>Scala用<code>Any</code>统一了原生类型和引用类型。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></pre></td>
<td class="lntd">
<pre class="chroma">Any
    AnyRef
        java String
        其他Java类型
        ScalaObject
    AnyVal
        scala Double
        scala Float
        scala Long
        scala Int
        scala Short
        scala Unit
        scala Boolean
        scala Char
        scala Byte</pre></td></tr></table>
</div>
</div>
<p>对于基本类型，可以用<code>asInstanseOf[T]</code>方法来强制转换类型：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">i</span> <span class="k">=</span> <span class="mf">10.</span><span class="n">asInstanceOf</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span>
<span class="n">i</span><span class="k">:</span> <span class="kt">Double</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="sc">&#39;A&#39;</span><span class="o">,</span><span class="sc">&#39;B&#39;</span><span class="o">,</span><span class="sc">&#39;C&#39;</span><span class="o">).</span><span class="n">map</span><span class="o">(</span><span class="n">c</span><span class="o">=&gt;(</span><span class="n">c</span><span class="o">+</span><span class="mi">32</span><span class="o">).</span><span class="n">asInstanceOf</span><span class="o">[</span><span class="kt">Char</span><span class="o">])</span>
<span class="n">res1</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Char</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">)</span></code></pre></td></tr></table>
</div>
</div>
<p>用<code>isInstanceOf[T]</code>方法来判断类型：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">b</span> <span class="k">=</span> <span class="mf">10.</span><span class="n">isInstanceOf</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
<span class="n">b</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span></code></pre></td></tr></table>
</div>
</div>
<p>而在<code>match ... case</code>中可以直接判断而不用此方法。</p>

<h2 id="操作符和方法">操作符和方法</h2>

<p>Scala为它的基本类型提供了丰富的操作符集。例如，<code>1 + 2</code>与<code>(1).+(2)</code>其实是一回事。换句话说，就是 Int 类包含了叫做<code>+</code>的方法，它带一个 Int 参数并返回一个 Int 结果。这个<code>+</code>方法在两 个 Int 相加时被调用：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">sum</span> <span class="k">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="c1">// Scala调用了(1).+(2) 
</span><span class="c1"></span><span class="n">sum</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">3</span></code></pre></td></tr></table>
</div>
</div>
<p>想要证实这点，可以把表达式显式地写成方法调用：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">sumMore</span> <span class="k">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">).+(</span><span class="mi">2</span><span class="o">)</span>
<span class="n">sumMore</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">3</span></code></pre></td></tr></table>
</div>
</div>
<p>而真正的事实是，Int包含了许多带不同的参数类型的重载的<code>+</code>方法。</p>

<p>符号<code>+</code>是操作符——更明确地说，是中缀操作符。操作符标注不仅限于像<code>+</code>这种其他语言里 看上去像操作符一样的东西。你可以把任何方法都当作操作符来标注。例如，类 String 有一个方法 <code>indexOf</code> 带一个 Char 参数。<code>indexOf</code> 方法搜索 String 里第一次出现的指定字符，并返回它的索引或 -1 如果没有找到。你可以把 <code>indexOf</code> 当作中缀操作符使用，就像这样：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">s</span> <span class="k">=</span> <span class="s">&#34;Hello, world!&#34;</span>
<span class="n">s</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Hello</span><span class="o">,</span> <span class="n">world</span><span class="o">!</span>
<span class="n">scala</span><span class="o">&gt;</span> <span class="n">s</span> <span class="n">indexOf</span> <span class="sc">&#39;o&#39;</span> <span class="c1">// Scala调用了s.indexOf(’o’) 
</span><span class="c1"></span><span class="n">res30</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">4</span></code></pre></td></tr></table>
</div>
</div>
<p>String 提供一个重载的 indexOf 方法，带两个参数，分别是要搜索的字符和从哪个索引开始搜索。尽管 这个 indexOf 方法带两个参数,你仍然可以用操作符标注的方式使用它。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="n">s</span> <span class="n">indexOf</span> <span class="o">(</span><span class="sc">&#39;o&#39;</span><span class="o">,</span> <span class="mi">5</span><span class="o">)</span> <span class="c1">// Scala调用了s.indexOf(’o’, 5) 
</span><span class="c1"></span><span class="n">res31</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">8</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>任何方法都可以是操作符。</p>
</blockquote>

<p>Scala 还有另外两种操作符标注：前缀和后缀。前缀标注中，方法名被放在调用的对象之前，如，<code>-7</code> 里的<code>-</code>。后缀标注在方法放在对象之后，如<code>7 toLong</code>里的<code>toLong</code>。</p>

<p>与中缀操作符&mdash;&mdash;-操作符带后两个操作数，一个在左一个在右，相反，前缀和后缀操作符都是一元 unary 的：它们仅带一个操作数。前缀方式中，操作数在操作符的右边。前缀操作符的例子有 <code>-2.0</code>、<code>!found</code>和<code>~0xFF</code>。与中缀操作符一致，这些前缀操作符是在值类型对象上调用方法的简写方式。然而这种情况下，方法名在操作符字符上前缀了<code>unary_</code>。 例如，Scala 会把表达式 <code>-2.0</code> 转换成方法调用<code>(2.0).unary_-</code>。你可以输入通过操作符和显式方法名两种方式对方法的调用来演示这一点：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="o">-</span><span class="mf">2.0</span> <span class="c1">// Scala调用了(2.0).unary_- res2: Double = -2.0
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span><span class="mf">2.0</span><span class="o">).</span><span class="n">unary_-</span>
<span class="n">res32</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2.0</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>可以当作前缀操作符用的标识符只有+,-,!和~</p>
</blockquote>

<p>后缀操作符是不用点或括号调用的不带任何参数的方法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">s</span> <span class="k">=</span> <span class="s">&#34;Hello, world!&#34;</span>
<span class="n">s</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Hello</span><span class="o">,</span> <span class="n">world</span><span class="o">!</span>
<span class="n">scala</span><span class="o">&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">toLowerCase</span>
<span class="n">res33</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="n">hello</span><span class="o">,</span> <span class="n">world</span><span class="o">!</span></code></pre></td></tr></table>
</div>
</div>
<p>后面的这个例子里，方法没带参数，或者还可以去掉点，采用后缀操作符标注方式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="n">s</span> <span class="n">toLowerCase</span>
<span class="n">res34</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="n">hello</span><span class="o">,</span> <span class="n">world</span><span class="o">!</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="数学运算">数学运算</h2>

<p>Int 无<code>++</code>、<code>--</code>操作，但可以<code>+=</code>、<code>-=</code>, 如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">var</span> <span class="n">i</span> <span class="k">=</span> <span class="mi">0</span>
<span class="n">i</span><span class="o">++</span>  <span class="c1">// 报错，无此操作
</span><span class="c1"></span><span class="n">i</span><span class="o">+=</span><span class="mi">1</span> <span class="c1">// 1
</span><span class="c1"></span><span class="n">i</span><span class="o">--</span>  <span class="c1">// 报错，无此操作
</span><span class="c1"></span><span class="n">i</span><span class="o">-=</span><span class="mi">1</span> <span class="o">//</span> <span class="mi">0</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="对象相等性">对象相等性</h2>

<p>如果你想比较一下看看两个对象是否相等，可以使用<code>==</code>，或它的反义<code>!=</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="c1">//比较基本类型
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span>
<span class="n">res36</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">2</span>
<span class="n">res37</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">2</span>
<span class="n">res38</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span>

<span class="c1">//比较对象
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="o">==</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>
<span class="n">res39</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="o">==</span> <span class="nc">List</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">)</span>
<span class="n">res40</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span>

<span class="c1">//比较不同类型
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">==</span> <span class="mf">1.0</span>
<span class="n">res41</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="o">==</span> <span class="s">&#34;hello&#34;</span>
<span class="n">res42</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span>

<span class="c1">//和null进行比较，不会有任何异常抛出
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="o">==</span> <span class="kc">null</span>
<span class="n">res43</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="kc">null</span> <span class="o">==</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>
<span class="n">res44</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="kc">null</span> <span class="o">==</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>
<span class="n">res45</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span></code></pre></td></tr></table>
</div>
</div>
<p>Scala的<code>==</code>很智能，他知道对于数值类型要调用Java中的<code>==</code>，引用类型要调用Java的<code>equals()</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="s">&#34;hello&#34;</span><span class="o">==</span><span class="s">&#34;Hello&#34;</span><span class="o">.</span><span class="n">toLowerCase</span><span class="o">()</span>
<span class="n">res46</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="n">truescala</span></code></pre></td></tr></table>
</div>
</div>
<p>在java中为false，在scala中为true。</p>

<p>Scala的<code>==</code>总是内容对比，<code>eq</code>才是引用对比，例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">s1</span><span class="o">,</span><span class="n">s2</span> <span class="k">=</span> <span class="s">&#34;hello&#34;</span>
<span class="k">val</span> <span class="n">s3</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="s">&#34;hello&#34;</span><span class="o">)</span>
<span class="n">s1</span><span class="o">==</span><span class="n">s2</span> <span class="c1">// true
</span><span class="c1"></span><span class="n">s1</span> <span class="n">eq</span> <span class="n">s2</span> <span class="c1">// true
</span><span class="c1"></span><span class="n">s1</span><span class="o">==</span><span class="n">s3</span> <span class="c1">// true 值相同
</span><span class="c1"></span><span class="n">s1</span> <span class="n">eq</span> <span class="n">s3</span> <span class="o">//</span> <span class="kc">false</span> <span class="n">不是同一个引用</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="富包装器">富包装器</h2>

<p>Scala的每一个基本类型都有一个富包装类：</p>

<ul>
<li>Byte：scala.runtime.RichByte</li>
<li>Short：scala.runtime.RichShort</li>
<li>Int：scala.runtime.RichInt</li>
<li>Long：scala.runtime.RichLong</li>
<li>Char：scala.runtime.RichChar</li>
<li>String：scala.runtime.RichString</li>
<li>Float：scala.runtime.RichFloat</li>
<li>Double：scala.runtime.RichDouble</li>
<li>Boolean：scala.runtime.RichBoolean</li>
</ul>

<p>一些富操作的例子如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="mi">0</span> <span class="n">max</span> <span class="mi">5</span>
<span class="mi">0</span> <span class="n">min</span> <span class="mi">5</span>
<span class="o">-</span><span class="mf">2.7</span> <span class="n">abs</span>
<span class="o">-</span><span class="mf">2.7</span> <span class="n">round</span>
<span class="mf">1.5</span> <span class="n">isInfinity</span>
<span class="o">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">0</span><span class="o">)</span> <span class="n">isInfinity</span>
<span class="mi">4</span> <span class="n">to</span> <span class="mi">6</span>
<span class="s">&#34;bob&#34;</span> <span class="n">capitalize</span>
<span class="s">&#34;robert&#34;</span> <span class="n">drop</span> <span class="mi">2</span></code></pre></td></tr></table>
</div>
</div>
<h1 id="5-函数">5. 函数</h1>

<p>函数的地位和一般的变量是同等的，可以作为函数的参数，可以作为返回值。传入函数的任何输入是只读的，比如一个字符串，不会被改变，只会返回一个新的字符串。</p>

<p>Java里面的一个问题就是很多只用到一次的private方法，没有和使用它的方法紧密结合；Scala可以在函数里面定义函数，很好地解决了这个问题。</p>

<h2 id="函数定义">函数定义</h2>

<p>函数和方法一般用<code>def</code>定义。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">max</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="o">{</span>
     <span class="o">|</span>   <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="o">)</span> <span class="n">x</span>
     <span class="o">|</span>   <span class="k">else</span> <span class="n">y</span> <span class="o">}</span>
<span class="n">max</span><span class="k">:</span> <span class="o">(</span><span class="kt">x:</span> <span class="kt">Int</span><span class="o">,</span> <span class="kt">y:</span> <span class="kt">Int</span><span class="o">)</span><span class="nc">Int</span></code></pre></td></tr></table>
</div>
</div>
<p>函数的基本结构如下：</p>

<p><img src="/images/scala-function-defined.jpg" alt="" /></p>

<p>有时候Scala编译器会需要你定义函数的结果类型。比方说，如果函数是递归的，你就必须显式地定义函数结果类型。然而在max的例子里，你可以不用写结果类型，编译器也能够推断它。同样，如果函数仅由一个句子组成，你可以可选地不写大括号。这样，你就可以把max函数写成这样:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">max2</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="o">)</span> <span class="n">x</span> <span class="k">else</span> <span class="n">y</span></code></pre></td></tr></table>
</div>
</div>
<p>一旦你定义了函数，你就可以用它的名字调用它，如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="n">max</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">)</span>
<span class="n">res25</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">5</span></code></pre></td></tr></table>
</div>
</div>
<p>函数不带参数，调用时括号可以省略：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">three</span><span class="o">()</span> <span class="k">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span>
<span class="n">three</span><span class="k">:</span> <span class="o">()</span><span class="kt">Int</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">three</span><span class="o">()</span>
<span class="n">res26</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">three</span>
<span class="n">res27</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">3</span></code></pre></td></tr></table>
</div>
</div>
<p>还有既不带参数也不返回有用结果的函数定义：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">greet</span><span class="o">()</span> <span class="k">=</span> <span class="n">println</span><span class="o">(</span><span class="s">&#34;Hello, world!&#34;</span><span class="o">)</span>
<span class="n">greet</span><span class="k">:</span> <span class="o">()</span><span class="kt">Unit</span></code></pre></td></tr></table>
</div>
</div>
<p>当你定义了<code>greet()</code>函数，解释器会回应一个<code>greet: ()Unit</code>。空白的括号说明函数不带参数。Unit 是 greet 的结果类型，Unit 的结果类型指的是函数没有返回有用的值。Scala 的 Unit 类型比较接近 Java 的 void 类型，而且实际上 Java 里 每一个返回 void 的方法都被映射为 Scala 里返回 Unit 的方法。</p>

<p><strong>总结</strong>：</p>

<ul>
<li>函数体没有像Java那样放在<code>{}</code>里，Scala 中的一条语句其实是一个表达式</li>
<li>如果函数体只包含一条表达式，则可以省略<code>{}</code></li>
<li>函数体没有显示的return语句，最后一条表达式的值会自动返回给函数的调用者</li>
<li>没有参数的函数调用时，括号可以省略</li>
</ul>

<h2 id="映射式定义">映射式定义</h2>

<p>一种特殊的定义：映射式定义（直接相当于数学中的映射关系）；其实也可以看成是没有参数的函数，返回一个匿名函数；调用的时候是调用这个返回的匿名函数。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">def</span> <span class="n">f</span><span class="k">:</span><span class="kt">Int</span><span class="o">=&gt;</span><span class="nc">Double</span> <span class="k">=</span> <span class="o">{</span> 
    <span class="k">case</span> <span class="mi">1</span> <span class="k">=&gt;</span> <span class="mf">0.1</span>
    <span class="k">case</span> <span class="mi">2</span> <span class="k">=&gt;</span> <span class="mf">0.2</span>
    <span class="k">case</span> <span class="k">_</span> <span class="k">=&gt;</span> <span class="mf">0.0</span>
<span class="o">}</span>
<span class="n">f</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="c1">// 0.1
</span><span class="c1"></span><span class="n">f</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="c1">// 0.0
</span><span class="c1"></span>
<span class="k">def</span> <span class="n">m</span><span class="k">:</span><span class="kt">Option</span><span class="o">[</span><span class="kt">User</span><span class="o">]</span><span class="k">=&gt;</span><span class="nc">User</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">Some</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">x</span>
    <span class="k">case</span> <span class="nc">None</span> <span class="k">=&gt;</span> <span class="kc">null</span>
<span class="o">}</span>
<span class="n">m</span><span class="o">(</span><span class="n">o</span><span class="o">).</span><span class="n">getOrElse</span><span class="o">(</span><span class="s">&#34;none...&#34;</span><span class="o">)</span>

<span class="k">def</span> <span class="n">m</span><span class="k">:</span><span class="o">(</span><span class="kt">Int</span><span class="o">,</span><span class="kt">Int</span><span class="o">)</span><span class="k">=&gt;</span><span class="nc">Int</span> <span class="k">=</span> <span class="k">_</span><span class="o">+</span><span class="k">_</span>
<span class="n">m</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span> <span class="c1">// 5
</span><span class="c1"></span>
<span class="k">def</span> <span class="n">m</span><span class="k">:</span><span class="kt">Int</span><span class="o">=&gt;</span><span class="nc">Int</span> <span class="k">=</span> <span class="mi">30</span><span class="o">+</span>  <span class="c1">// 相当于30+_,如果唯一的&#34;_&#34;在最后,可以省略
</span><span class="c1"></span><span class="n">m</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span> <span class="o">//</span> <span class="mi">35</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="特殊函数名">特殊函数名 + - * /</h2>

<p>方法名可以是<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">def</span> <span class="o">*(</span><span class="n">x</span><span class="k">:</span><span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span> <span class="o">}</span>
<span class="o">*(</span><span class="mi">10</span><span class="o">,</span><span class="mi">20</span><span class="o">)</span> <span class="c1">// = 200
</span><span class="c1"></span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span>  <span class="o">//</span><span class="n">相当于1</span><span class="o">.+(</span><span class="mi">2</span><span class="o">)</span></code></pre></td></tr></table>
</div>
</div>
<p>定义一元操作符（置前）可用<code>unary_</code>：一元的，单一元素的，单一构成的。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="o">-</span><span class="mi">2</span>  <span class="c1">//相当于：(2).unary_- 
</span><span class="c1"></span><span class="o">+</span><span class="mi">2</span> <span class="c1">//相当于：(2).unary_+ 
</span><span class="c1"></span><span class="o">!</span><span class="kc">true</span> <span class="c1">//相当于：(true).unary_! 
</span><span class="c1"></span><span class="o">~</span><span class="mi">0</span>  <span class="o">//</span><span class="n">相当于</span> <span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="n">unary_~</span>  </code></pre></td></tr></table>
</div>
</div>
<h2 id="函数的调用">函数的调用</h2>

<p>正常调用，不传参数时候可以省略括号：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">def</span> <span class="n">f</span><span class="o">(</span><span class="n">s</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">&#34;default&#34;</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span> <span class="n">s</span> <span class="o">}</span>
<span class="n">f</span> <span class="c1">// &#34;hello world&#34;
</span><span class="c1"></span><span class="n">f</span><span class="o">()</span> <span class="o">//</span> <span class="s">&#34;hello world&#34;</span></code></pre></td></tr></table>
</div>
</div>
<p>对象的无参数方法的调用，可以省略<code>.</code>和<code>()</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="s">&#34;hello world&#34;</span> <span class="n">toUpperCase</span> <span class="o">//</span> <span class="s">&#34;HELLO WORLD&#34;</span></code></pre></td></tr></table>
</div>
</div>
<p>对象的1个参数方法的调用，可以省略<code>.</code>和<code>()</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="s">&#34;hello world&#34;</span> <span class="n">indexOf</span> <span class="n">w</span> <span class="c1">// 6
</span><span class="c1"></span><span class="s">&#34;hello world&#34;</span> <span class="n">substring</span> <span class="mi">5</span> <span class="c1">// &#34;world&#34;
</span><span class="c1"></span><span class="nc">Console</span> <span class="n">print</span> <span class="mi">10</span> <span class="c1">// 但不能写 print 10，只能print(10)，省略Console.
</span><span class="c1"></span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">//</span> <span class="n">相当于</span> <span class="o">(</span><span class="mi">1</span><span class="o">).+(</span><span class="mi">2</span><span class="o">)</span></code></pre></td></tr></table>
</div>
</div>
<p>对象的多个参数方法的调用,也可省略<code>.</code>但不能省略<code>()</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="s">&#34;hello world&#34;</span> <span class="n">substring</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">5</span><span class="o">)</span> <span class="o">//</span> <span class="s">&#34;hello&#34;</span></code></pre></td></tr></table>
</div>
</div>
<p><strong>注意</strong>：</p>

<ul>
<li>不在class或者object中的函数不能如此调用：</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">def</span> <span class="n">m</span><span class="o">(</span><span class="n">i</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="n">i</span><span class="o">*</span><span class="n">i</span>
<span class="n">m</span> <span class="mi">10</span> <span class="o">//</span> <span class="n">错误</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>但在class或者object中可以使用<code>this</code>调用：</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">object</span> <span class="nc">method</span> <span class="o">{</span>
   <span class="k">def</span> <span class="n">m</span><span class="o">(</span><span class="n">i</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="n">i</span><span class="o">*</span><span class="n">i</span>
   <span class="k">def</span> <span class="n">main</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span> <span class="k">=</span> <span class="o">{</span>
        <span class="k">val</span> <span class="n">ii</span> <span class="k">=</span> <span class="k">this</span> <span class="n">m</span> <span class="mi">15</span>  <span class="c1">// 等同于 m(15), this 不能省略
</span><span class="c1"></span>       <span class="n">println</span><span class="o">(</span><span class="n">ii</span><span class="o">)</span>
   <span class="o">}</span>
<span class="o">}</span>   </code></pre></td></tr></table>
</div>
</div>
<h2 id="匿名函数">匿名函数</h2>

<p>形式：<code>((命名参数列表)=&gt;函数实现)(参数列表)</code></p>

<p>特殊地：</p>

<ul>
<li>无参数： <code>(()=&gt;函数实现)()</code></li>
<li>有一个参数且在最后： <code>(函数实现)(参数)</code></li>
<li>无返回值： <code>((命名参数列表)=&gt;Unit)(参数列表)</code></li>
</ul>

<p>使用<code>=&gt;</code>创建匿名函数：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">scala&gt; <span class="o">(</span>x: Int<span class="o">)=</span>&gt; x+1 
res23: <span class="nv">Int</span> <span class="o">=</span>&gt; <span class="nv">Int</span> <span class="o">=</span> &lt;function1&gt;

scala&gt; x:Int <span class="o">=</span>&gt; x+1 // 没有大括号时，<span class="o">()</span>是必须的
&lt;console&gt;:1: error: <span class="s1">&#39;;&#39;</span> expected but <span class="s1">&#39;=&gt;&#39;</span> found.
       x:Int <span class="o">=</span>&gt; x+1

scala&gt; <span class="o">{(</span>x: Int<span class="o">)=</span>&gt; x+1 <span class="o">}</span> 
res24: <span class="nv">Int</span> <span class="o">=</span>&gt; <span class="nv">Int</span> <span class="o">=</span> &lt;function1&gt;

scala&gt; <span class="o">{</span>x:Int <span class="o">=</span>&gt; x+1<span class="o">}</span> // 有大括号时，<span class="o">()</span>可以去掉
res25: <span class="nv">Int</span> <span class="o">=</span>&gt; <span class="nv">Int</span> <span class="o">=</span> &lt;function1&gt;</code></pre></td></tr></table>
</div>
</div>
<p>函数值是对象，所以如果你愿意可以把它们存入变量。它们也是函数，所以你可以使用通常的括
号函数调用写法调用它们：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">m1</span> <span class="k">=</span> <span class="o">(</span><span class="n">x</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span><span class="k">=&gt;</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span>
<span class="n">m1</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=&gt;</span> <span class="nc">Int</span> <span class="k">=</span> <span class="o">&lt;</span><span class="n">function1</span><span class="o">&gt;</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">m2</span> <span class="k">=</span> <span class="o">{</span><span class="n">x</span><span class="k">:</span><span class="kt">Int</span><span class="o">=&gt;</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="o">}</span> <span class="c1">// 不用(), 用{}
</span><span class="c1"></span><span class="n">m2</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=&gt;</span> <span class="nc">Int</span> <span class="k">=</span> <span class="o">&lt;</span><span class="n">function1</span><span class="o">&gt;</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">m1</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>
<span class="n">res26</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">11</span></code></pre></td></tr></table>
</div>
</div>
<p>有参数的匿名函数的调用：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="o">((</span><span class="n">i</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span><span class="k">=&gt;</span> <span class="n">i</span><span class="o">*</span><span class="n">i</span><span class="o">)(</span><span class="mi">3</span><span class="o">)</span>
<span class="n">res25</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">9</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="o">((</span><span class="n">i</span><span class="k">:</span><span class="kt">Int</span><span class="o">,</span> <span class="n">j</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="o">)(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span>
<span class="n">res26</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">7</span></code></pre></td></tr></table>
</div>
</div>
<p>有一个参数且在最后的匿名函数的调用：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span><span class="mi">10</span><span class="o">*)(</span><span class="mi">2</span><span class="o">)</span> <span class="c1">// 20, 相当于 ((x:Int)=&gt;10*x)(2)
</span><span class="c1"></span><span class="n">res27</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">20</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span><span class="mi">10</span><span class="o">+)(</span><span class="mi">2</span><span class="o">)</span> <span class="c1">// 12, 相当于 ((x:Int)=&gt;10+x)(2)
</span><span class="c1"></span><span class="n">res28</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">12</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="s">&#34;a&#34;</span><span class="o">,</span><span class="s">&#34;b&#34;</span><span class="o">,</span><span class="s">&#34;c&#34;</span><span class="o">)</span> <span class="n">mkString</span><span class="o">)(</span><span class="s">&#34;=&#34;</span><span class="o">)</span> <span class="c1">// a=b=c
</span><span class="c1"></span><span class="n">res29</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="n">a</span><span class="k">=</span><span class="n">b</span><span class="k">=</span><span class="n">c</span></code></pre></td></tr></table>
</div>
</div>
<p>无参数的匿名函数的调用：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="o">(()</span><span class="k">=&gt;</span> <span class="mi">10</span><span class="o">)()</span> <span class="c1">// 10
</span><span class="c1"></span><span class="n">res30</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">10</span></code></pre></td></tr></table>
</div>
</div>
<p>无参数无返回值：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="o">(()</span> <span class="k">=&gt;</span> <span class="nc">Unit</span><span class="o">)</span>
<span class="n">res31</span><span class="k">:</span> <span class="o">()</span> <span class="o">=&gt;</span> <span class="nc">Unit</span><span class="o">.</span><span class="k">type</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">function0</span><span class="o">&gt;</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span> <span class="o">()</span><span class="k">=&gt;</span> <span class="o">{</span><span class="n">println</span><span class="o">(</span><span class="s">&#34;hello&#34;</span><span class="o">);</span> <span class="mi">20</span><span class="o">*</span><span class="mi">10</span><span class="o">}</span> <span class="o">)()</span>
<span class="n">hello</span>
<span class="n">res32</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">200</span>

<span class="c1">//相当于调用一段方法
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="o">{</span> <span class="n">println</span><span class="o">(</span><span class="s">&#34;hello&#34;</span><span class="o">);</span> <span class="mi">20</span><span class="o">*</span><span class="mi">10</span> <span class="o">}</span>
<span class="n">hello</span>
<span class="n">res33</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">200</span></code></pre></td></tr></table>
</div>
</div>
<p>匿名函数的两个例子：</p>

<ul>
<li>例子1：直接使用匿名函数。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">).</span><span class="n">map</span><span class="o">(</span> <span class="o">(</span><span class="n">i</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span><span class="k">=&gt;</span> <span class="n">i</span><span class="o">*</span><span class="n">i</span><span class="o">)</span>
<span class="n">res34</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">16</span><span class="o">)</span>

<span class="c1">//这里对变量 i 使用了类型推断
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">).</span><span class="n">map</span><span class="o">(</span> <span class="n">i</span><span class="k">=&gt;</span> <span class="n">i</span><span class="o">*</span><span class="n">i</span><span class="o">)</span>
<span class="n">res35</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">16</span><span class="o">)</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>例子2：无参数的匿名函数</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="c1">//定义一个普通的函数，参数为函数，返回值为空
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">times3</span><span class="o">(</span><span class="n">m</span><span class="k">:</span><span class="o">()=&gt;</span> <span class="nc">Unit</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span> <span class="n">m</span><span class="o">();</span><span class="n">m</span><span class="o">();</span><span class="n">m</span><span class="o">()</span> <span class="o">}</span>
<span class="n">times3</span><span class="k">:</span> <span class="o">(</span><span class="kt">m:</span> <span class="o">()</span> <span class="o">=&gt;</span> <span class="kt">Unit</span><span class="o">)</span><span class="nc">Unit</span>

<span class="c1">//传入一个无参数的匿名函数
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="n">times3</span> <span class="o">(</span> <span class="o">()</span><span class="k">=&gt;</span> <span class="n">println</span><span class="o">(</span><span class="s">&#34;hello world&#34;</span><span class="o">)</span> <span class="o">)</span>
<span class="n">hello</span> <span class="n">world</span>
<span class="n">hello</span> <span class="n">world</span>
<span class="n">hello</span> <span class="n">world</span></code></pre></td></tr></table>
</div>
</div>
<p>由于是无参数的匿名函数，可进一步简化：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">times3</span><span class="o">(</span><span class="n">m</span><span class="k">:</span> <span class="o">=&gt;</span><span class="nc">Unit</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span> <span class="n">m</span><span class="o">;</span><span class="n">m</span><span class="o">;</span><span class="n">m</span> <span class="o">}</span>  <span class="c1">// 参见“lazy参数”
</span><span class="c1"></span><span class="n">times3</span><span class="k">:</span> <span class="o">(</span><span class="kt">m:</span> <span class="o">=&gt;</span> <span class="kt">Unit</span><span class="o">)</span><span class="nc">Unit</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">times3</span> <span class="o">(</span> <span class="n">println</span><span class="o">(</span><span class="s">&#34;hello world&#34;</span><span class="o">)</span> <span class="o">)</span>
<span class="n">hello</span> <span class="n">world</span>
<span class="n">hello</span> <span class="n">world</span>
<span class="n">hello</span> <span class="n">world</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="偏应用函数-partial-application">偏应用函数（Partial application）</h2>

<p>用下划线代替一个或多个参数的函数叫偏应用函数（partially applied function），例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">sum</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">b</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">c</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span>
<span class="n">sum</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span><span class="o">,</span><span class="kt">Int</span><span class="o">,</span><span class="nc">Int</span><span class="o">)</span><span class="nc">Int</span></code></pre></td></tr></table>
</div>
</div>
<p>你就可以把函数 sum 应用到参数 1、2 和 3 上，如下:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="n">sum</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>
<span class="n">res1</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">6</span></code></pre></td></tr></table>
</div>
</div>
<p>偏应用函数是一种表达式，你不需要提供函数需要的所有参数。代之以仅提供部分，或不提供所需参数。比如，要创建不提供任何三个所需参数的调用 sum 的偏应用表达式，只要在“sum”之后放一个下划线即可，然后可以把得到的函数存入变量。举例如下:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="n">sum</span> <span class="k">_</span>
<span class="n">a</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span><span class="o">,</span> <span class="kt">Int</span><span class="o">,</span> <span class="nc">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="nc">Int</span> <span class="k">=</span> <span class="o">&lt;</span><span class="n">function</span><span class="o">&gt;</span></code></pre></td></tr></table>
</div>
</div>
<p>有了这个代码，Scala 编译器以偏应用函数表达式<code>sum _</code>，实例化一个带三个缺失整数参数的函数值，并把这个新的函数值的索引赋给变量 a。当你把这个新函数值应用于三个参数之上时，它就转回头调用 <code>sum</code>，并传入这三个参数:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="n">a</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>
<span class="n">res2</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">6</span></code></pre></td></tr></table>
</div>
</div>
<p>实际发生的事情是这样的：名为a的变量指向一个函数值对象。这个函数值是由Scala编译器依照偏应用函数表达式<code>sum _</code>，自动产生的类的一个实例。编译器产生的类有一个<code>apply</code>方法带三个参数。之所以带三个参数是因为<code>sum _</code>表达式缺少的参数数量为三。Scala编译器把表达式<code>a(1,2,3)</code>翻译成对函数值的<code>apply</code>方法的调用，传入三个参数 1、2、3。因此 <code>a(1,2,3)</code>是下列代码的短格式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">apply</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>
<span class="n">res3</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">6</span></code></pre></td></tr></table>
</div>
</div>
<p>也可针对部分参数使用：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">b</span> <span class="k">=</span> <span class="n">sum</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="k">_:</span> <span class="kt">Int</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>
<span class="n">b</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="nc">Int</span> <span class="k">=</span> <span class="o">&lt;</span><span class="n">function</span><span class="o">&gt;</span>
<span class="n">scala</span><span class="o">&gt;</span> <span class="n">b</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
<span class="n">res4</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">6</span></code></pre></td></tr></table>
</div>
</div>
<p><code>_</code> 在Scala中的使用场景，见 <a href="/2015/04/23/all-the-uses-of-an-underscore-in-scala.html">Scala中下划线的用途</a>。</p>

<p>如果<code>_</code>在最后，则可以省略：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="mi">1</span> <span class="n">to</span> <span class="mi">5</span> <span class="n">foreach</span> <span class="n">println</span>
<span class="mi">1</span> <span class="n">to</span> <span class="mi">5</span> <span class="n">map</span> <span class="o">(</span><span class="mi">10</span><span class="o">*)</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="柯里化函数">柯里化函数</h2>

<p>有时会有这样的需求：允许别人一会在你的函数上应用一些参数，然后又应用另外的一些参数。</p>

<p>例如一个乘法函数，在一个场景需要选择乘数，而另一个场景需要选择被乘数。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">multiply</span><span class="o">(</span><span class="n">m</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">m</span> <span class="o">*</span> <span class="n">n</span>
<span class="n">multiply</span><span class="k">:</span> <span class="o">(</span><span class="kt">m:</span> <span class="kt">Int</span><span class="o">)(</span><span class="kt">n:</span> <span class="kt">Int</span><span class="o">)</span><span class="kt">Int</span></code></pre></td></tr></table>
</div>
</div>
<p>你可以直接传入两个参数。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="n">multiply</span><span class="o">(</span><span class="mi">2</span><span class="o">)(</span><span class="mi">3</span><span class="o">)</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">6</span></code></pre></td></tr></table>
</div>
</div>
<p>你可以填上第一个参数并且部分应用第二个参数。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">timesTwo</span> <span class="k">=</span> <span class="n">multiply</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="k">_</span>
<span class="n">timesTwo</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="nc">Int</span> <span class="k">=</span> <span class="o">&lt;</span><span class="n">function1</span><span class="o">&gt;</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">timesTwo</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
<span class="n">res1</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">6</span></code></pre></td></tr></table>
</div>
</div>
<p>你可以对任何多参数函数执行柯里化。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span><span class="n">multiply</span> <span class="k">_</span><span class="o">).</span><span class="n">curried</span>
<span class="n">res1</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="o">(</span><span class="nc">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="nc">Int</span> <span class="k">=</span> <span class="o">&lt;</span><span class="n">function1</span><span class="o">&gt;</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="可变长度参数">可变长度参数</h2>

<p>这是一个特殊的语法，可以向方法传入任意多个同类型的参数。例如要在多个字符串上执行String的<code>capitalize</code>函数，可以这样写：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">def</span> <span class="n">capitalizeAll</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">String*</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
  <span class="n">args</span><span class="o">.</span><span class="n">map</span> <span class="o">{</span> <span class="n">arg</span> <span class="k">=&gt;</span>
    <span class="n">arg</span><span class="o">.</span><span class="n">capitalize</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">capitalizeAll</span><span class="o">(</span><span class="s">&#34;rarity&#34;</span><span class="o">,</span> <span class="s">&#34;applejack&#34;</span><span class="o">)</span>
<span class="n">res1</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="nc">ArrayBuffer</span><span class="o">(</span><span class="nc">Rarity</span><span class="o">,</span> <span class="nc">Applejack</span><span class="o">)</span></code></pre></td></tr></table>
</div>
</div>
<p>函数内部，重复参数的类型是声明参数类型的数组。因此，capitalizeAll函数里被声明为类型“String*” 的args的类型实际上是 Array[String]。然而，如果你有一个合适类型的数组，并尝试把它当作重复参数传入，你会得到一个编译器错误:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">arr</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">(</span><span class="s">&#34;what&#39;s&#34;</span><span class="o">,</span> <span class="s">&#34;up&#34;</span><span class="o">,</span> <span class="s">&#34;doc?&#34;</span><span class="o">)</span>
<span class="n">scala</span><span class="o">&gt;</span> <span class="n">capitalizeAll</span><span class="o">(</span><span class="n">arr</span><span class="o">)</span>
<span class="o">&lt;</span><span class="n">console</span><span class="k">&gt;:</span><span class="mi">31</span><span class="k">:</span> <span class="kt">error:</span> <span class="k">type</span> <span class="kt">mismatch</span><span class="o">;</span>
 <span class="n">found</span>   <span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
 <span class="n">required</span><span class="k">:</span> <span class="kt">String</span>
              <span class="n">capitalizeAll</span><span class="o">(</span><span class="n">arr</span><span class="o">)</span>
                            <span class="o">^</span></code></pre></td></tr></table>
</div>
</div>
<p>要实现这个做法，你需要在数组参数后添加一个冒号和一个<code>_*</code>符号，像这样:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="n">capitalizeAll</span><span class="o">(</span><span class="n">arr</span><span class="k">:</span> <span class="k">_</span><span class="kt">*</span><span class="o">)</span>
<span class="n">res2</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="nc">ArrayBuffer</span><span class="o">(</span><span class="nc">What</span>&#39;s<span class="o">,</span> <span class="nc">Up</span><span class="o">,</span> <span class="nc">Doc</span><span class="o">?)</span></code></pre></td></tr></table>
</div>
</div>
<p>这个标注告诉编译器把arr的每个元素当作参数，而不是当作单一的参数传给capitalizeAll。</p>

<h2 id="lazy参数">lazy参数</h2>

<p>就是调用时用到函数的该参数，每次都重新计算。</p>

<p>lazy参数是变量或值：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="c1">//一般参数
</span><span class="c1"></span><span class="k">def</span> <span class="n">f1</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Long</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
  <span class="k">val</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span><span class="n">b</span><span class="o">)</span> <span class="k">=</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">x</span><span class="o">)</span>
  <span class="n">println</span><span class="o">(</span><span class="s">&#34;a=&#34;</span><span class="o">+</span><span class="n">a</span><span class="o">+</span><span class="s">&#34;,b=&#34;</span><span class="o">+</span><span class="n">b</span><span class="o">)</span>
<span class="o">}</span>
<span class="n">f1</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="n">nanoTime</span><span class="o">)</span>
<span class="c1">//a=1429501936753731000,b=1429501936753731000
</span><span class="c1"></span>
<span class="c1">//lazy参数
</span><span class="c1"></span><span class="k">def</span> <span class="n">f2</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="o">=&gt;</span><span class="nc">Long</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
  <span class="k">val</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span><span class="n">b</span><span class="o">)</span> <span class="k">=</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">x</span><span class="o">)</span>
  <span class="n">println</span><span class="o">(</span><span class="s">&#34;a=&#34;</span><span class="o">+</span><span class="n">a</span><span class="o">+</span><span class="s">&#34;,b=&#34;</span><span class="o">+</span><span class="n">b</span><span class="o">)</span>
<span class="o">}</span>
<span class="n">f2</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="n">nanoTime</span><span class="o">)</span>
<span class="o">//</span><span class="n">a</span><span class="k">=</span><span class="mi">1429502007512014000</span><span class="o">,</span><span class="n">b</span><span class="k">=</span><span class="mi">1429502007512015000</span></code></pre></td></tr></table>
</div>
</div>
<p>lazy参数是函数时：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="c1">//一般参数，打印一次
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">times1</span><span class="o">(</span><span class="n">m</span><span class="k">:</span> <span class="kt">Unit</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span> <span class="n">m</span><span class="o">;</span><span class="n">m</span><span class="o">;</span><span class="n">m</span> <span class="o">}</span>
<span class="n">times1</span><span class="k">:</span> <span class="o">(</span><span class="kt">m:</span> <span class="kt">Unit</span><span class="o">)</span><span class="kt">Unit</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">times1</span> <span class="o">(</span> <span class="n">println</span><span class="o">(</span><span class="s">&#34;hello world&#34;</span><span class="o">)</span> <span class="o">)</span>
<span class="n">hello</span> <span class="n">world</span>

<span class="c1">//lazy参数，打印三次
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">times2</span><span class="o">(</span><span class="n">m</span><span class="k">:</span> <span class="o">=&gt;</span><span class="nc">Unit</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span> <span class="n">m</span><span class="o">;</span><span class="n">m</span><span class="o">;</span><span class="n">m</span> <span class="o">}</span>
<span class="n">times2</span><span class="k">:</span> <span class="o">(</span><span class="kt">m:</span> <span class="o">=&gt;</span> <span class="kt">Unit</span><span class="o">)</span><span class="nc">Unit</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">times2</span> <span class="o">(</span> <span class="n">println</span><span class="o">(</span><span class="s">&#34;hello world&#34;</span><span class="o">)</span> <span class="o">)</span>
<span class="n">hello</span> <span class="n">world</span>
<span class="n">hello</span> <span class="n">world</span>
<span class="n">hello</span> <span class="n">world</span></code></pre></td></tr></table>
</div>
</div>
<h1 id="6-流程控制">6. 流程控制</h1>

<h2 id="if-else">if..else</h2>

<p>使用 if else 表达式:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">if</span> <span class="o">(</span><span class="n">x</span><span class="o">&gt;</span><span class="n">y</span><span class="o">)</span> <span class="mi">100</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="while">while</h2>

<p>使用 while 为列表求和:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">def</span> <span class="n">sum</span><span class="o">(</span><span class="n">xs</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span> <span class="k">=</span> <span class="o">{</span> 
    <span class="k">var</span> <span class="n">total</span> <span class="k">=</span> <span class="mi">0</span> 
    <span class="k">var</span> <span class="n">index</span> <span class="k">=</span> <span class="mi">0</span> 
    <span class="k">while</span> <span class="o">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="n">xs</span><span class="o">.</span><span class="n">size</span><span class="o">)</span> <span class="o">{</span> 
        <span class="n">total</span> <span class="o">+=</span> <span class="n">xs</span><span class="o">(</span><span class="n">index</span><span class="o">)</span> 
        <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span> 
    <span class="o">}</span> 
    <span class="n">total</span> 
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<p>Scala 也有 do-while 循环。除了把状态测试从前面移到后面之外,与 while 循环没有区别。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">var</span> <span class="n">line</span> <span class="k">=</span> <span class="s">&#34;&#34;</span>
<span class="k">do</span> <span class="o">{</span>
  <span class="n">line</span> <span class="k">=</span> <span class="n">readLine</span><span class="o">()</span>
  <span class="n">println</span><span class="o">(</span><span class="s">&#34;Read: &#34;</span> <span class="o">+</span> <span class="n">line</span><span class="o">)</span>
<span class="o">}</span> <span class="k">while</span> <span class="o">(</span><span class="n">line</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="循环操作">循环操作</h2>

<p>for：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="c1">//循环中的变量不用定义，如：
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">for</span><span class="o">(</span><span class="n">i</span><span class="k">&lt;-</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">3</span><span class="o">;</span> <span class="n">j</span><span class="k">=</span><span class="n">i</span><span class="o">*</span><span class="n">i</span><span class="o">)</span> <span class="n">println</span><span class="o">(</span><span class="n">j</span><span class="o">)</span>  <span class="c1">// 包含3
</span><span class="c1"></span><span class="mi">1</span>
<span class="mi">4</span>
<span class="mi">9</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="k">&lt;-</span> <span class="mi">1</span> <span class="n">until</span> <span class="mi">3</span><span class="o">)</span> <span class="n">println</span><span class="o">(</span><span class="n">i</span><span class="o">)</span>  <span class="c1">// 不包含3
</span><span class="c1"></span><span class="mi">1</span>
<span class="mi">2</span>

<span class="c1">//如果for条件是多行，不能用()，要用{}
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">for</span><span class="o">{</span><span class="n">i</span><span class="k">&lt;-</span><span class="mi">0</span> <span class="n">to</span> <span class="mi">5</span>
     <span class="o">|</span> <span class="n">j</span><span class="k">&lt;-</span><span class="mi">0</span> <span class="n">to</span> <span class="mi">2</span><span class="o">}</span> <span class="k">yield</span> <span class="n">i</span><span class="o">+</span><span class="n">j</span>
<span class="n">res3</span><span class="k">:</span> <span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Vector</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">)</span>

<span class="c1">//带有过滤条件，可以有多个过滤条件，逗号分隔
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="k">&lt;-</span> <span class="mi">1</span> <span class="n">until</span> <span class="mi">10</span> <span class="k">if</span> <span class="n">i</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="n">println</span><span class="o">(</span><span class="n">i</span><span class="o">)</span>
<span class="mi">2</span>
<span class="mi">4</span>
<span class="mi">6</span>
<span class="mi">8</span>

<span class="c1">//for中的嵌套循环，包括多个 &lt;-
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">for</span> <span class="o">{</span><span class="n">i</span> <span class="k">&lt;-</span> <span class="mi">1</span> <span class="n">until</span> <span class="mi">3</span><span class="o">;</span> <span class="n">j</span> <span class="k">&lt;-</span> <span class="mi">1</span> <span class="n">until</span> <span class="mi">3</span><span class="o">}</span> <span class="n">println</span><span class="o">(</span><span class="n">i</span><span class="o">*</span><span class="n">j</span><span class="o">)</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">2</span>
<span class="mi">4</span></code></pre></td></tr></table>
</div>
</div>
<p>for yield：把每次循环的结果<code>移进</code>一个集合（类型和循环内的一致），格式：<code>for {子句} yield {循环体}</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">for</span> <span class="o">(</span><span class="n">e</span><span class="k">&lt;-</span><span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">))</span> <span class="k">yield</span> <span class="o">(</span><span class="n">e</span><span class="o">*</span><span class="n">e</span><span class="o">)</span> <span class="c1">// List(1,4,9)
</span><span class="c1"></span><span class="k">for</span> <span class="o">{</span><span class="n">e</span><span class="k">&lt;-</span><span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)}</span> <span class="k">yield</span> <span class="o">{</span> <span class="n">e</span><span class="o">*</span><span class="n">e</span> <span class="o">}</span> <span class="c1">// List(1,4,9)
</span><span class="c1"></span><span class="k">for</span> <span class="o">{</span><span class="n">e</span><span class="k">&lt;-</span><span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)}</span> <span class="k">yield</span> <span class="n">e</span><span class="o">*</span><span class="n">e</span> <span class="o">//</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">9</span><span class="o">)</span></code></pre></td></tr></table>
</div>
</div>
<p>foreach:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">).</span><span class="n">foreach</span><span class="o">(</span><span class="n">println</span><span class="o">)</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">3</span><span class="o">).</span><span class="n">foreach</span><span class="o">(</span><span class="n">println</span><span class="o">)</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span><span class="mi">1</span> <span class="n">until</span> <span class="mi">4</span><span class="o">)</span> <span class="n">foreach</span> <span class="n">println</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">Range</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">4</span><span class="o">)</span> <span class="n">foreach</span> <span class="n">println</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>

<span class="c1">//可以写步长
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="n">to</span> <span class="o">(</span><span class="mi">11</span><span class="o">,</span><span class="mi">2</span><span class="o">)</span>
<span class="n">res9</span><span class="k">:</span> <span class="kt">scala.collection.immutable.Range.Inclusive</span> <span class="o">=</span> <span class="nc">Range</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">11</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">11</span> <span class="n">by</span> <span class="mi">2</span>
<span class="n">res10</span><span class="k">:</span> <span class="kt">scala.collection.immutable.Range</span> <span class="o">=</span> <span class="nc">Range</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">11</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="n">until</span> <span class="o">(</span><span class="mi">11</span><span class="o">,</span><span class="mi">2</span><span class="o">)</span>
<span class="n">res11</span><span class="k">:</span> <span class="kt">scala.collection.immutable.Range</span> <span class="o">=</span> <span class="nc">Range</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">9</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="n">until</span> <span class="mi">11</span> <span class="n">by</span> <span class="mi">2</span>
<span class="n">res12</span><span class="k">:</span> <span class="kt">scala.collection.immutable.Range</span> <span class="o">=</span> <span class="nc">Range</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">9</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">r</span> <span class="k">=</span> <span class="o">(</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">10</span> <span class="n">by</span> <span class="mi">4</span><span class="o">)</span>
<span class="n">r</span><span class="k">:</span> <span class="kt">scala.collection.immutable.Range</span> <span class="o">=</span> <span class="nc">Range</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">9</span><span class="o">)</span>

<span class="c1">//也可以是BigInt
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span><span class="mi">1</span><span class="k">:</span><span class="kt">BigInt</span><span class="o">)</span> <span class="n">to</span> <span class="mi">3</span>
<span class="n">res13</span><span class="k">:</span> <span class="kt">scala.collection.immutable.NumericRange.Inclusive</span><span class="o">[</span><span class="kt">BigInt</span><span class="o">]</span> <span class="k">=</span> <span class="nc">NumericRange</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span></code></pre></td></tr></table>
</div>
</div>
<p>forall：判断是否所有都符合。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">3</span><span class="o">)</span> <span class="n">forall</span> <span class="o">(</span><span class="mi">0</span><span class="o">&lt;)</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="o">(-</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">3</span><span class="o">)</span> <span class="n">forall</span> <span class="o">(</span><span class="mi">0</span><span class="o">&lt;)</span>
<span class="n">res1</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">isPrime</span><span class="o">(</span><span class="n">n</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="mi">2</span> <span class="n">until</span> <span class="n">n</span> <span class="n">forall</span> <span class="o">(</span><span class="n">n</span><span class="o">%</span><span class="k">_</span><span class="o">!=</span><span class="mi">0</span><span class="o">)</span>
<span class="n">isPrime</span><span class="k">:</span> <span class="o">(</span><span class="kt">n:</span> <span class="kt">Int</span><span class="o">)</span><span class="kt">Boolean</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">for</span> <span class="o">(</span><span class="n">i</span><span class="k">&lt;-</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">10</span> <span class="k">if</span> <span class="n">isPrime</span><span class="o">(</span><span class="n">i</span><span class="o">))</span> <span class="n">println</span><span class="o">(</span><span class="n">i</span><span class="o">)</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">5</span>
<span class="mi">7</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span><span class="mi">2</span> <span class="n">to</span> <span class="mi">20</span><span class="o">)</span> <span class="n">partition</span> <span class="o">(</span><span class="n">isPrime</span> <span class="k">_</span><span class="o">)</span>
<span class="n">res4</span><span class="k">:</span> <span class="o">(</span><span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">[</span><span class="kt">Int</span><span class="o">],</span> <span class="n">scala</span><span class="o">.</span><span class="n">collection</span><span class="o">.</span><span class="n">immutable</span><span class="o">.</span><span class="nc">IndexedSeq</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span> <span class="k">=</span> <span class="o">(</span><span class="nc">Vector</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mi">13</span><span class="o">,</span> <span class="mi">17</span><span class="o">,</span> <span class="mi">19</span><span class="o">),</span><span class="nc">Vector</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="mi">14</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">16</span><span class="o">,</span> <span class="mi">18</span><span class="o">,</span> <span class="mi">20</span><span class="o">))</span>
<span class="c1">//也可直接调用BigInt的内部方法
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span><span class="mi">2</span> <span class="n">to</span> <span class="mi">20</span><span class="o">)</span> <span class="n">partition</span> <span class="o">(</span><span class="nc">BigInt</span><span class="o">(</span><span class="k">_</span><span class="o">)</span> <span class="n">isProbablePrime</span><span class="o">(</span><span class="mi">10</span><span class="o">))</span>
<span class="n">res5</span><span class="k">:</span> <span class="o">(</span><span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">[</span><span class="kt">Int</span><span class="o">],</span> <span class="n">scala</span><span class="o">.</span><span class="n">collection</span><span class="o">.</span><span class="n">immutable</span><span class="o">.</span><span class="nc">IndexedSeq</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span> <span class="k">=</span> <span class="o">(</span><span class="nc">Vector</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mi">13</span><span class="o">,</span> <span class="mi">17</span><span class="o">,</span> <span class="mi">19</span><span class="o">),</span><span class="nc">Vector</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="mi">14</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">16</span><span class="o">,</span> <span class="mi">18</span><span class="o">,</span> <span class="mi">20</span><span class="o">))</span></code></pre></td></tr></table>
</div>
</div>
<p>reduceLeft方法首先应用于前两个元素，然后再应用于第一次应用的结果和接下去的一个元素，等等，直至整个列表。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="c1">//计算阶乘
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">fac</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="mi">1</span> <span class="n">to</span> <span class="n">n</span> <span class="n">reduceLeft</span><span class="o">(</span><span class="k">_</span><span class="o">*</span><span class="k">_</span><span class="o">)</span>
<span class="n">fac</span><span class="k">:</span> <span class="o">(</span><span class="kt">n:</span> <span class="kt">Int</span><span class="o">)</span><span class="kt">Int</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">fac</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span> <span class="c1">// 5*4*3*2 = 120
</span><span class="c1"></span><span class="n">res6</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">120</span>

<span class="c1">//求和
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">6</span><span class="o">).</span><span class="n">reduceLeft</span><span class="o">(</span><span class="k">_</span><span class="o">+</span><span class="k">_</span><span class="o">)</span>
<span class="n">res7</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">12</span>

<span class="c1">//取max：
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">9</span><span class="o">,</span><span class="mi">6</span><span class="o">,</span><span class="mi">7</span><span class="o">).</span><span class="n">reduceLeft</span><span class="o">(</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span><span class="k">=&gt;</span> <span class="k">if</span> <span class="o">(</span><span class="n">x</span><span class="o">&gt;</span><span class="n">y</span><span class="o">)</span> <span class="n">x</span> <span class="k">else</span> <span class="n">y</span> <span class="o">)</span>
<span class="n">res8</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">9</span>
<span class="c1">//或者简化为：  
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">9</span><span class="o">,</span><span class="mi">6</span><span class="o">,</span><span class="mi">7</span><span class="o">).</span><span class="n">reduceLeft</span><span class="o">(</span><span class="k">_</span> <span class="n">max</span> <span class="k">_</span><span class="o">)</span>
<span class="n">res9</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">9</span></code></pre></td></tr></table>
</div>
</div>
<p>foldLeft：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="c1">//累加
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">sum</span><span class="o">(</span><span class="n">L</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span> <span class="k">=</span> <span class="n">L</span><span class="o">.</span><span class="n">foldLeft</span><span class="o">(</span><span class="mi">0</span><span class="o">)((</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">)</span>
<span class="n">sum</span><span class="k">:</span> <span class="o">(</span><span class="kt">L:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span><span class="nc">Int</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">sum</span><span class="o">(</span><span class="n">L</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span> <span class="k">=</span> <span class="n">L</span><span class="o">.</span><span class="n">foldLeft</span><span class="o">(</span><span class="mi">0</span><span class="o">)(</span><span class="k">_</span> <span class="o">+</span> <span class="k">_</span><span class="o">)</span>
<span class="n">sum</span><span class="k">:</span> <span class="o">(</span><span class="kt">L:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span><span class="nc">Int</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">sum</span><span class="o">(</span><span class="n">L</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span> <span class="k">=</span> <span class="o">(</span><span class="mi">0</span><span class="o">/:</span><span class="n">L</span><span class="o">){</span><span class="k">_</span> <span class="o">+</span> <span class="k">_</span><span class="o">}</span>
<span class="n">sum</span><span class="k">:</span> <span class="o">(</span><span class="kt">L:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span><span class="nc">Int</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">sum</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">7</span><span class="o">))</span>
<span class="n">res10</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">16</span>

<span class="c1">//乘法：
</span><span class="c1"></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">multiply</span><span class="o">(</span><span class="n">L</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span> <span class="k">=</span> <span class="n">L</span><span class="o">.</span><span class="n">foldLeft</span><span class="o">(</span><span class="mi">1</span><span class="o">)(</span><span class="k">_</span> <span class="o">*</span> <span class="k">_</span><span class="o">)</span>
<span class="n">multiply</span><span class="k">:</span> <span class="o">(</span><span class="kt">L:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span><span class="nc">Int</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">multiply</span><span class="o">(</span><span class="nc">Seq</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">))</span>
<span class="n">res11</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">120</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">multiply</span><span class="o">(</span><span class="mi">1</span> <span class="n">until</span> <span class="mi">5</span><span class="o">+</span><span class="mi">1</span><span class="o">)</span>
<span class="n">res12</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">120</span></code></pre></td></tr></table>
</div>
</div>
<p>scanLeft:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">).</span><span class="n">scanLeft</span><span class="o">(</span><span class="mi">0</span><span class="o">)(</span><span class="k">_</span><span class="o">+</span><span class="k">_</span><span class="o">)</span>
<span class="n">res13</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">15</span><span class="o">)</span>
<span class="c1">//相当于 (0,(0+1),(0+1+2),(0+1+2+3),(0+1+2+3+4),(0+1+2+3+4+5))
</span><span class="c1"></span>
<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">).</span><span class="n">scanLeft</span><span class="o">(</span><span class="mi">1</span><span class="o">)(</span><span class="k">_</span><span class="o">*</span><span class="k">_</span><span class="o">)</span>
<span class="n">res14</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">24</span><span class="o">,</span> <span class="mi">120</span><span class="o">)</span>
<span class="c1">//相当于 (1, 1*1, 1*1*2, 1*1*2*3, 1*1*2*3*4, 1*1*2*3*4*5)
</span><span class="c1"></span>
<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">).</span><span class="n">scanLeft</span><span class="o">(</span><span class="mi">2</span><span class="o">)(</span><span class="k">_</span><span class="o">*</span><span class="k">_</span><span class="o">)</span>
<span class="n">res16</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="mi">48</span><span class="o">,</span> <span class="mi">240</span><span class="o">)</span></code></pre></td></tr></table>
</div>
</div>
<p>take、drop、splitAt:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="mi">1</span> <span class="n">to</span> <span class="mi">10</span> <span class="n">by</span> <span class="mi">2</span> <span class="n">take</span> <span class="mi">3</span> <span class="c1">// Range(1, 3, 5)
</span><span class="c1"></span><span class="mi">1</span> <span class="n">to</span> <span class="mi">10</span> <span class="n">by</span> <span class="mi">2</span> <span class="n">drop</span> <span class="mi">3</span> <span class="c1">// Range(7, 9)
</span><span class="c1"></span><span class="mi">1</span> <span class="n">to</span> <span class="mi">10</span> <span class="n">by</span> <span class="mi">2</span> <span class="n">splitAt</span> <span class="mi">2</span> <span class="o">//</span> <span class="o">(</span><span class="nc">Range</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">),</span><span class="nc">Range</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">9</span><span class="o">))</span></code></pre></td></tr></table>
</div>
</div>
<p>takeWhile、dropWhile、span：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="mi">1</span> <span class="n">to</span> <span class="mi">10</span> <span class="n">takeWhile</span> <span class="o">(</span><span class="k">_</span><span class="o">&lt;</span><span class="mi">5</span><span class="o">)</span> <span class="c1">// (1,2,3,4)
</span><span class="c1"></span><span class="mi">1</span> <span class="n">to</span> <span class="mi">10</span> <span class="n">takeWhile</span> <span class="o">(</span><span class="k">_</span><span class="o">&gt;</span><span class="mi">5</span><span class="o">)</span> <span class="c1">// ()
</span><span class="c1"></span><span class="mi">10</span> <span class="n">to</span> <span class="o">(</span><span class="mi">1</span><span class="o">,-</span><span class="mi">1</span><span class="o">)</span> <span class="n">takeWhile</span><span class="o">(</span><span class="k">_</span><span class="o">&gt;</span><span class="mi">6</span><span class="o">)</span> <span class="c1">// (10,9,8,7)
</span><span class="c1"></span>
<span class="mi">1</span> <span class="n">to</span> <span class="mi">10</span> <span class="n">takeWhile</span> <span class="o">(</span> <span class="n">n</span><span class="k">=&gt;</span> <span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="o">&lt;</span><span class="mi">25</span><span class="o">)</span>  <span class="c1">// (1, 2, 3, 4)
</span><span class="c1"></span>
<span class="mi">1</span> <span class="n">to</span> <span class="mi">10</span> <span class="n">dropWhile</span> <span class="o">(</span><span class="k">_</span><span class="o">&lt;</span><span class="mi">5</span><span class="o">)</span> <span class="c1">// (5,6,7,8,9,10)
</span><span class="c1"></span><span class="mi">1</span> <span class="n">to</span> <span class="mi">10</span> <span class="n">dropWhile</span> <span class="o">(</span><span class="n">n</span><span class="k">=&gt;</span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="o">&lt;</span><span class="mi">25</span><span class="o">)</span> <span class="c1">// (5,6,7,8,9,10)
</span><span class="c1"></span> 
<span class="mi">1</span> <span class="n">to</span> <span class="mi">10</span> <span class="n">span</span> <span class="o">(</span><span class="k">_</span><span class="o">&lt;</span><span class="mi">5</span><span class="o">)</span> <span class="c1">// ((1,2,3,4),(5,6,7,8)
</span><span class="c1"></span><span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="n">span</span> <span class="o">(</span><span class="k">_</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">)</span> <span class="c1">// ((1), (0,1,0))
</span><span class="c1">// 注意，partition是和span完全不同的操作
</span><span class="c1"></span><span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="n">partition</span> <span class="o">(</span><span class="k">_</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">)</span> <span class="o">//</span> <span class="o">((</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">),(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">))</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="match-表达式">match 表达式</h2>

<p>Scala 的匹配表达式允许你在许多可选项中做选择，就好象其它语言中的 switch 语句。通常说来 match 表达式可以让你使用任意的模式。</p>

<p>匹配值：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">times</span> <span class="k">=</span> <span class="mi">1</span>

<span class="n">times</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="o">-</span><span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="k">=&gt;</span> <span class="s">&#34;zore&#34;</span>
  <span class="k">case</span> <span class="mi">1</span> <span class="k">=&gt;</span> <span class="s">&#34;one&#34;</span>
  <span class="k">case</span> <span class="mi">2</span> <span class="k">=&gt;</span> <span class="s">&#34;two&#34;</span>
  <span class="k">case</span> <span class="k">_</span> <span class="k">=&gt;</span> <span class="s">&#34;some other number&#34;</span>
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<p>使用守卫进行匹配:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">times</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="n">i</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">=&gt;</span> <span class="s">&#34;one&#34;</span>
  <span class="k">case</span> <span class="n">i</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">=&gt;</span> <span class="s">&#34;two&#34;</span>
  <span class="k">case</span> <span class="k">_</span> <span class="k">=&gt;</span> <span class="s">&#34;some other number&#34;</span>
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<p>匹配类型:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></pre></td>
<td class="lntd">
<pre class="chroma">def bigger(o: Any): Any = {
  o match {
    case i: Int if i &lt; 0 =&gt; i - 1
    case i: Int =&gt; i + 1
    case d: Double if d &lt; 0.0 =&gt; d - 0.1
    case d: Double =&gt; d + 0.1
    case text: String =&gt; text + &#34;s&#34;
  }
}</pre></td></tr></table>
</div>
</div>
<p>匹配 Option 类型：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="n">map</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="k">match</span> <span class="o">{</span>
     <span class="o">|</span>  <span class="k">case</span> <span class="nc">Some</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">println</span><span class="o">(</span><span class="s">&#34;Got something&#34;</span><span class="o">)</span>
     <span class="o">|</span>  <span class="k">case</span> <span class="nc">None</span> <span class="k">=&gt;</span> <span class="n">println</span><span class="o">(</span><span class="s">&#34;Got nothing&#34;</span><span class="o">)</span>
     <span class="o">|</span> <span class="o">}</span>
<span class="nc">Got</span> <span class="n">something</span></code></pre></td></tr></table>
</div>
</div>
<p>匹配类成员:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">def</span> <span class="n">calcType</span><span class="o">(</span><span class="n">calc</span><span class="k">:</span> <span class="kt">Calculator</span><span class="o">)</span> <span class="k">=</span> <span class="n">calc</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="k">_</span> <span class="k">if</span> <span class="n">calc</span><span class="o">.</span><span class="n">brand</span> <span class="o">==</span> <span class="s">&#34;hp&#34;</span> <span class="o">&amp;&amp;</span> <span class="n">calc</span><span class="o">.</span><span class="n">model</span> <span class="o">==</span> <span class="s">&#34;20B&#34;</span> <span class="k">=&gt;</span> <span class="s">&#34;financial&#34;</span>
  <span class="k">case</span> <span class="k">_</span> <span class="k">if</span> <span class="n">calc</span><span class="o">.</span><span class="n">brand</span> <span class="o">==</span> <span class="s">&#34;hp&#34;</span> <span class="o">&amp;&amp;</span> <span class="n">calc</span><span class="o">.</span><span class="n">model</span> <span class="o">==</span> <span class="s">&#34;48G&#34;</span> <span class="k">=&gt;</span> <span class="s">&#34;scientific&#34;</span>
  <span class="k">case</span> <span class="k">_</span> <span class="k">if</span> <span class="n">calc</span><span class="o">.</span><span class="n">brand</span> <span class="o">==</span> <span class="s">&#34;hp&#34;</span> <span class="o">&amp;&amp;</span> <span class="n">calc</span><span class="o">.</span><span class="n">model</span> <span class="o">==</span> <span class="s">&#34;30B&#34;</span> <span class="k">=&gt;</span> <span class="s">&#34;business&#34;</span>
  <span class="k">case</span> <span class="k">_</span> <span class="k">=&gt;</span> <span class="s">&#34;unknown&#34;</span>
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<p>与 Java 的 switch 语句比，匹配表达式还有一些重要的差别：</p>

<ul>
<li>case 后面可以是任意类型。</li>
<li>每个可选项的最后并没有 break，break 是隐含的。</li>
<li>match 表达式也能产生值。</li>
<li>在最后一行指令中的<code>_</code>是一个通配符，它保证了我们可以处理所有的情况。</li>
</ul>

<p>参考 Effective Scala 对<a href="http://twitter.github.com/effectivescala/#Functional programming-Pattern matching">什么时候使用模式匹配</a>和 <a href="http://twitter.github.com/effectivescala/#Formatting-Pattern matching">模式匹配格式化</a>的建议。A Tour of Scala 也描述了<a href="http://www.scala-lang.org/node/120">模式匹配</a>。</p>

<h2 id="case-if-表达式">case if 表达式</h2>

<p>写法1：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="o">(</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">20</span><span class="o">)</span> <span class="n">foreach</span> <span class="o">{</span>                          
    <span class="k">case</span> <span class="n">x</span> <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">%</span> <span class="mi">15</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">printf</span><span class="o">(</span><span class="s">&#34;%2d:15n\n&#34;</span><span class="o">,</span><span class="n">x</span><span class="o">)</span>
    <span class="k">case</span> <span class="n">x</span> <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>  <span class="k">=&gt;</span> <span class="n">printf</span><span class="o">(</span><span class="s">&#34;%2d:3n\n&#34;</span><span class="o">,</span><span class="n">x</span><span class="o">)</span>
    <span class="k">case</span> <span class="n">x</span> <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>  <span class="k">=&gt;</span> <span class="n">printf</span><span class="o">(</span><span class="s">&#34;%2d:5n\n&#34;</span><span class="o">,</span><span class="n">x</span><span class="o">)</span>
    <span class="k">case</span> <span class="n">x</span> <span class="k">=&gt;</span> <span class="n">printf</span><span class="o">(</span><span class="s">&#34;%2d\n&#34;</span><span class="o">,</span><span class="n">x</span><span class="o">)</span>                          
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<p>写法2：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="o">(</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">20</span><span class="o">)</span> <span class="n">map</span> <span class="o">(</span><span class="n">x</span><span class="k">=&gt;</span> <span class="o">(</span><span class="n">x</span><span class="o">%</span><span class="mi">3</span><span class="o">,</span><span class="n">x</span><span class="o">%</span><span class="mi">5</span><span class="o">)</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">printf</span><span class="o">(</span><span class="s">&#34;%2d:15n\n&#34;</span><span class="o">,</span><span class="n">x</span><span class="o">)</span>
  <span class="k">case</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="k">_</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">printf</span><span class="o">(</span><span class="s">&#34;%2d:3n\n&#34;</span><span class="o">,</span><span class="n">x</span><span class="o">)</span>
  <span class="k">case</span> <span class="o">(</span><span class="k">_</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">printf</span><span class="o">(</span><span class="s">&#34;%2d:5n\n&#34;</span><span class="o">,</span><span class="n">x</span><span class="o">)</span>
  <span class="k">case</span> <span class="o">(</span><span class="k">_</span><span class="o">,</span><span class="k">_</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">printf</span><span class="o">(</span><span class="s">&#34;%2d\n&#34;</span><span class="o">,</span><span class="n">x</span><span class="o">)</span>
<span class="o">})</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="break-continue">break、continue</h2>

<p>Scala中没有break和continue语法，需要break得加辅助boolean变量，或者用库（continue没有）。</p>

<p>例子1：打印&rsquo;a&rsquo;到&rsquo;z&rsquo;的前10个</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">var</span> <span class="n">i</span><span class="o">=</span><span class="n">0</span><span class="o">;</span> <span class="n">val</span> <span class="n">rt</span> <span class="o">=</span> <span class="k">for</span><span class="o">(</span><span class="n">e</span><span class="o">&lt;-(</span><span class="sc">&#39;a&#39;</span> <span class="n">to</span> <span class="sc">&#39;z&#39;</span><span class="o">)</span> <span class="k">if</span> <span class="o">{</span><span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="n">1</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">10</span><span class="o">})</span> <span class="n">printf</span><span class="o">(</span><span class="s">&#34;%d:%s\n&#34;</span><span class="o">,</span><span class="n">i</span><span class="o">,</span><span class="n">e</span><span class="o">)</span>

<span class="o">(</span><span class="sc">&#39;a&#39;</span> <span class="n">to</span> <span class="sc">&#39;z&#39;</span><span class="o">).</span><span class="na">slice</span><span class="o">(</span><span class="n">0</span><span class="o">,</span><span class="n">10</span><span class="o">).</span><span class="na">foreach</span><span class="o">(</span><span class="n">println</span><span class="o">)</span></code></pre></td></tr></table>
</div>
</div>
<p>例子2：1 到 100 和小于1000的数</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">var</span> <span class="o">(</span><span class="n">n</span><span class="o">,</span><span class="n">sum</span><span class="o">)=(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span> <span class="k">for</span><span class="o">(</span><span class="n">i</span><span class="k">&lt;-</span><span class="mi">0</span> <span class="n">to</span> <span class="mi">100</span> <span class="k">if</span> <span class="o">(</span><span class="n">sum</span><span class="o">+</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">1000</span><span class="o">))</span> <span class="o">{</span> <span class="n">n</span><span class="k">=</span><span class="n">i</span><span class="o">;</span> <span class="n">sum</span><span class="o">+=</span><span class="n">i</span> <span class="o">}</span>
<span class="o">//</span> <span class="n">n</span> <span class="k">=</span> <span class="mi">44</span><span class="o">,</span> <span class="n">sum</span> <span class="k">=</span> <span class="mi">990</span></code></pre></td></tr></table>
</div>
</div>
<p>例子3：使用库来实现break</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">import</span> <span class="nn">scala.util.control.Breaks._</span>
<span class="k">for</span><span class="o">(</span><span class="n">e</span><span class="k">&lt;-</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">10</span><span class="o">)</span> <span class="o">{</span> <span class="k">val</span> <span class="n">e2</span> <span class="k">=</span> <span class="n">e</span><span class="o">*</span><span class="n">e</span><span class="o">;</span> <span class="k">if</span> <span class="o">(</span><span class="n">e2</span><span class="o">&gt;</span><span class="mi">10</span><span class="o">)</span> <span class="n">break</span><span class="o">;</span> <span class="n">println</span><span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="try-catch-finally">try catch finally</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">var</span> <span class="n">f</span> <span class="k">=</span> <span class="n">openFile</span><span class="o">()</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="n">f</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">FileReader</span><span class="o">(</span><span class="s">&#34;input.txt&#34;</span><span class="o">)</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">{</span>
  <span class="k">case</span> <span class="n">ex</span><span class="k">:</span> <span class="kt">FileNotFoundException</span> <span class="o">=&gt;</span> <span class="c1">// Handle missing file
</span><span class="c1"></span>  <span class="k">case</span> <span class="n">ex</span><span class="k">:</span> <span class="kt">IOException</span> <span class="o">=&gt;</span> <span class="c1">// Handle other I/O error
</span><span class="c1"></span><span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
  <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="o">()</span>
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<p>捕获异常使用的是<code>模式匹配</code>。</p>

<h1 id="7-其他">7. 其他</h1>

<h2 id="null-none-nil-nothing">Null, None, Nil, Nothing</h2>

<ul>
<li><code>Null</code>： <code>Trait</code>，其唯一实例为null，是<code>AnyRef</code>的子类，<em>不是</em> <code>AnyVal</code>的子类</li>
<li><code>Nothing</code>： <code>Trait</code>，所有类型（包括<code>AnyRef</code>和<code>AnyVal</code>）的子类，没有实例</li>
<li><code>None</code>： <code>Option</code>的两个子类之一，另一个是<code>Some</code>，用于安全的函数返回值</li>
<li><code>Unit</code>： 无返回值的函数的类型，和java的void对应</li>
<li><code>Nil</code>： 长度为0的List</li>
</ul>

<h2 id="区分">区分&lt;-,=&gt;,-&gt;</h2>

<p><code>&lt;-</code>用于for循环，符号<code>∈</code>的象形:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="k">&lt;-</span> <span class="mi">0</span> <span class="n">until</span> <span class="mi">100</span><span class="o">)</span></code></pre></td></tr></table>
</div>
</div>
<p><code>=&gt;</code>用于匿名函数，也可用在import中定义别名：<code>import javax.swing.{JFrame=&gt;jf}</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">).</span><span class="n">map</span><span class="o">(</span><span class="n">x</span><span class="k">=&gt;</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">)</span>
<span class="o">((</span><span class="n">i</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span><span class="k">=&gt;</span><span class="n">i</span><span class="o">*</span><span class="n">i</span><span class="o">)(</span><span class="mi">5</span><span class="o">)</span> <span class="o">//</span> <span class="mi">25</span></code></pre></td></tr></table>
</div>
</div>
<p><code>-&gt;</code>用于Map初始化</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scala" data-lang="scala"><span class="nc">Map</span><span class="o">(</span><span class="mi">1</span><span class="o">-&gt;</span><span class="s">&#34;a&#34;</span><span class="o">,</span><span class="mi">2</span><span class="o">-&gt;</span><span class="s">&#34;b&#34;</span><span class="o">)</span> <span class="o">//</span> <span class="o">(</span><span class="mi">1</span><span class="k">:</span><span class="err">&#34;</span><span class="kt">a</span><span class="err">&#34;</span><span class="o">,</span><span class="mi">2</span><span class="k">:</span><span class="err">&#34;</span><span class="kt">b</span><span class="err">&#34;</span><span class="o">)</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>注意：在scala中任何对象都能调用<code>-&gt;</code>方法（隐式转换），返回包含键值对的二元组!</p>
</blockquote>

<h1 id="8-参考资料">8. 参考资料</h1>

<ul>
<li><a href="http://www.scala-lang.org/">http://www.scala-lang.org/</a></li>
<li><a href="http://twitter.github.io/scala_school/zh_cn/index.html">Scala 课堂</a></li>
<li><a href="http://qiujj.com/static/Scala-Handbook.htm">Scala 2.8+ Handbook</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/java/j-scala/">面向 Java 开发人员的 Scala 指南系列</a></li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">JavaChen</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2015-04-20
        
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/img/reward/wechatpay.jpg">
        <span>微信打赏</span>
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="/img/reward/alipay.jpg">
        <span>支付宝打赏</span>
      </label>
  </div>
</div><footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/scala/">scala</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/2015/04/22/scala-collections/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Scala集合</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/2015/04/17/spark-mllib-collaborative-filtering/">
            <span class="next-text nav-default">Spark MLlib中的协同过滤</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  
    <script src="https://utteranc.es/client.js"
            repo="javachen/javachen.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:junecloud@163.com" class="iconfont icon-email" title="email"></a>
      <a href="http://github.com/javachen" class="iconfont icon-github" title="github"></a>
      <a href="http://weibo.com/chenzhijun" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://space.bilibili.com/287563020/" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="https://blog.javachen.space/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> 本站总访问量 <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次 </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> 本站总访客数 <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 人 </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2009 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">JavaChen</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.e1476869.min.js"></script>

<script id="baidu_analytics">
  var _hmt = _hmt || [];
  (function() {
    if (window.location.hostname === 'localhost') return;
    var hm = document.createElement("script"); hm.async = true;
    hm.src = "https://hm.baidu.com/hm.js?7eaf37274cf8796df56903a88389e82f";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>

<script id="baidu_push">
  (function(){
    if (window.location.hostname === 'localhost') return;
    var bp = document.createElement('script'); bp.async = true;
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
      bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
  })();
</script>




</body>
</html>
